<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE chapter [
	<!ENTITY % extensions SYSTEM "../stylesheets/macros.ent" >
	<!ENTITY % DocBookDTD PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
	"http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd">
	<!ENTITY % entities SYSTEM "../stylesheets/macros-de.ent" >
	%extensions;
	%DocBookDTD;
	%entities;
]>
<chapter id="computers:general"><title>Rechnerverwaltung</title>

    <section id="computers::hostaccounts"><title>Verwaltung der Rechnerkonten in Univention Management Console</title>
        <para>
            Alle UCS-, Linux- und Windowssysteme innerhalb einer UCS-Domäne verfügen über
            ein Rechner-Domänenkonto, mit dem sich die Systeme untereinander
            authentifizieren und mit dem sie auf das LDAP-Verzeichnis zugreifen.
        </para>
        <para>
            Das Rechnerkonto wird in der Regel automatisch beim
            Join des Systems zur UCS-Domäne angelegt (siehe
            <xref linkend="domaenenbeitritt"/>), das Rechnerkonto kann jedoch auch
            vor dem Domänenbeitritt angelegt werden.
        </para>

        <para>
		  Das Passwort für das Rechnerkonto wird beim Domänenbeitritt automatisch erzeugt und in der
		  Datei <filename>/etc/machine.secret</filename> gespeichert. Das Passwort umfasst in der
		  Grundeinstellung 20 Zeichen (konfigurierbar über die &ucsUCRV; <envar>machine/password/length</envar>).
		  Das Passwort wird in festen Intervallen automatisch
		  neu generiert (in der Grundeinstellung 21 Tage, konfigurierbar über die
		  &ucsUCRV; <envar>server/password/interval</envar>). Die Passwortrotation kann über die
		  Variable <envar>server/password/change</envar> auch deaktiviert werden.
        </para>

        <para>
            Für jede Systemrolle existiert ein eigenständiger Rechnerobjekttyp.
            Weitergehende Hinweise zu den einzelnen Systemrollen finden sich in
            <xref linkend="systemrollen"/>.
        </para>
        <para>
            Rechnerkonten werden im Modul <guimenu>Rechner</guimenu> von &ucsUMC;
            verwaltet.
        </para>

		<para>
		  In der Grundeinstellung wird zum Anlegen eines Rechners ein vereinfachter Assistent
		  angezeigt, der nur die wichtigsten Einstellungen abfragt. Durch einen Klick auf
		  <guimenu>Erweitert</guimenu> werden alle Attribute angezeigt. Ist dem ausgewählten
		  Netzwerk-Objekt (siehe <xref linkend="networks::introduction"/>) eine DNS-Forward-Zone
		  und/oder eine DNS-Reverse-Zone zugeordnet (siehe <xref linkend="networks:dns"/>), wird für
		  den Rechner automatisch ein Host-Record und/oder Pointer-Record angelegt. Ist für das
		  Netzwerk-Objekt ein DHCP-Service konfiguriert und wird eine MAC-Adresse konfiguriert, wird
		  ein DHCP-Rechner-Eintrag angelegt (siehe <xref linkend="module:dhcp:dhcp"/>)
		</para>

		<para>
		  Der vereinfachte Assistent kann für alle Systemrollen deaktiviert werden, indem die &ucsUCRV;
		  <envar>directory/manager/web/modules/computers/computer/wizard/disabled</envar> auf
		  <literal>true</literal> gesetzt wird.
		</para>

		<figure id="computer-create">
			<title>Anlegen eines Rechners in UMC</title>
			<graphic scalefit="1" width="65%" align="center" fileref="illustrations44/computers_computer_de.png"/>
		</figure>
		<figure id="computer-create-advanced">
			<title>Erweiterte Rechneransicht</title>
			<graphic scalefit="1" width="90%" align="center" fileref="illustrations44/computers_computer_advanced_de.png"/>
		</figure>
        <table>
            <title>Reiter 'Allgemein'</title>
            <tgroup cols="2">
                <colspec colnum="1" colname="col1" colwidth="1*"/>
                <colspec colnum="2" colname="col2" colwidth="2*"/>
                <thead>
                    <row>
                        <entry>Attribut</entry>
                        <entry>Beschreibung</entry>
                    </row>
                </thead>
                <tbody>
                    <row>
                        <entry>Name</entry>
                        <entry>
                            <para>
                                In dieses Eingabefeld muss der Rechnername eingetragen werden.
                            </para>
                            <para>
                                Um die Kompatibilität mit verschiedenen Betriebssystemen und Diensten
                                zu gewährleisten, sollten Rechnernamen ausschließlich die Buchstaben
                                <emphasis>a</emphasis> bis <emphasis>z</emphasis> in Kleinschreibung, Zahlen, Bindestriche und
                                Unterstriche enthalten. Umlaute und Sonderzeichen sind nicht erlaubt. Der Punkt wird als
                                Trennzeichen zwischen den einzelnen Bestandteilen eines voll
                                qualifizierten Domänennamens interpretiert und darf deswegen nicht
                                innerhalb des Rechnernamens verwendet werden. Rechnernamen sollten mit
                                einem Buchstaben beginnen.
                            </para>
                            <para>
                                Microsoft Windows akzeptiert nur Rechnernamen mit maximal 13 Zeichen,
                                so dass man sich bei Rechnernamen grundsätzlich auf 13 Zeichen
                                beschränken sollte, sofern nicht ausgeschlossen ist, dass Microsoft
                                Windows zum Einsatz kommen wird.
                            </para>
                            <para>
							  Der Rechnername kann nach dem Anlegen nur bei den Systemrollen
							  <emphasis>Windows Workstation/Server</emphasis>, <emphasis>Mac OS X
							  Client</emphasis> und <emphasis>IP-Managed-Client</emphasis> verändert
							  werden.
							</para>
                        </entry>
                    </row>
                    <row>
                        <entry>Beschreibung</entry>
                        <entry>
                            Für den Rechner kann in diesem Eingabefeld eine beliebige Beschreibung
                            hinterlegt werden.
                        </entry>
                    </row>
                    <row>
                        <entry>Inventarnummer</entry>
                        <entry>
                            Hier können Inventarnummern für Rechner hinterlegt werden.
                        </entry>
                    </row>
                    <row>
                        <entry>Netzwerk</entry>
                        <entry>
                            Der Rechner kann einem bereits angelegten Netzwerk-Objekt zugeordnet
                            werden. Hinweise zur IP-Konfiguration finden sich in
                            <xref linkend="networks::introduction"/>.
                        </entry>
                    </row>
                    <row>
                        <entry>MAC-Adresse</entry>
                        <entry>
                            An dieser Stelle kann die MAC-Adresse des Rechners eingetragen
                            werden, z.B. <systemitem class="etheraddress">2e:44:56:3f:12:32</systemitem>. Soll der Rechner einen
                            DHCP-Eintrag erhalten, ist die Angabe der MAC-Adresse zwingend
                            erforderlich.
                        </entry>
                    </row>
                    <row>
                        <entry>IP-Adresse</entry>
                        <entry>
                            <para>
                                Hier können feste IP-Adressen für den Rechner eingegeben werden.
                                Wenn auf der Karteikarte <guimenu>Allgemein</guimenu> ein Netzwerk
                                ausgewählt wurde, wird die IP-Adresse, die dem Rechner aus dem
                                Netzwerk automatisch zugewiesen wurde, hier angezeigt. Weitere
                                Hinweise zur IP-Konfiguration finden sich in <xref linkend="networks::introduction"/>.
                            </para>
                            <para>
                                Eine hier (also im LDAP-Verzeichnis) eingetragene IP-Adresse kann dem
                                Rechner nur über DHCP zugewiesen werden. Sollte kein DHCP-Server
                                verwendet werden, so muss die IP-Adresse auch lokal auf dem Rechner
                                konfiguriert werden, siehe <xref linkend="hardware::networkconfiguration"/>.
                            </para>
                            <para>
                                Werden die eingetragenen IP-Adressen eines Rechners ohne Wechsel der
                                DNS-Zonen geändert, werden diese im Rechner-Objekt und - soweit
                                vorhanden - auch automatisch in den DNS-Einträgen in der Forward und
                                Reverse Lookup Zone geändert. Falls die IP-Adresse des Rechners noch
                                an anderen Stellen eingetragen wurde, müssen diese Einträge manuell
                                geändert werden! Wurde beispielsweise in einer DHCP-Boot-Richtlinie
                                nicht der Name des Boot-Servers, sondern seine IP-Adresse dort
                                eingetragen, muss diese IP-Adresse manuell durch das Bearbeiten der
                                Richtlinie angepasst werden.
                            </para>
                        </entry>
                    </row>
                    <row>
                        <entry>Forward-Zone für DNS-Eintrag</entry>
                        <entry>
                            <para>
                                Die DNS-Forward-Zone, in die der Rechner eingetragen wird. Die Zone
                                dient der Auflösung des Rechnernamens in die zugewiesene IP-Adresse.
                                Hinweise zur IP-Konfiguration finden sich in <xref linkend="networks::introduction"/>.
                            </para>
                        </entry>
                    </row>
                    <row>
                        <entry>Reverse-Zone für DNS-Eintrag</entry>
                        <entry>
                            Die DNS-Reverse-Zone, in die der Rechner eingetragen wird. Mit der
                            Zone wird die IP-Adresse des Rechners in einen Rechnernamen aufgelöst.
                            Hinweise zur IP-Konfiguration finden sich in <xref linkend="networks::introduction"/>.
                        </entry>
                    </row>
                    <row>
                        <entry>Service für DHCP-Eintrag</entry>
                        <entry>
                            <para>
                                Wenn ein Rechner seine IP-Adresse über DHCP beziehen soll, muss hier
                                ein DHCP-Service zugeordnet werden. Hinweise zur IP-Konfiguration
                                finden sich in <xref linkend="networks::introduction"/>.
                            </para>
                            <para>
                                Bei der Zuweisung muss darauf geachtet werden, dass die DHCP-Server
                                des DHCP-Service-Objekts für das physikalische Netzwerk zuständig
                                sind.
                            </para>
                            <para>
                                Wurde auf der Karteikarte <guimenu>Allgemein</guimenu> ein Netzwerk
                                ausgewählt, wird automatisch ein für das Netzwerk passender Eintrag
                                hinzugefügt, der nachträglich manuell angepasst werden kann.
                            </para>
                        </entry>
                    </row>
                </tbody>
            </tgroup>
        </table>
        <table>
            <title>Reiter 'Konto' (erweiterte Einstellungen)</title>
            <tgroup cols="2">
                <colspec colnum="1" colname="col1" colwidth="1*"/>
                <colspec colnum="2" colname="col2" colwidth="2*"/>
                <thead>
                    <row>
                        <entry>Attribut</entry>
                        <entry>Beschreibung</entry>
                    </row>
                </thead>
                <tbody>
                    <row>
                        <entry>Passwort</entry>
                        <entry>
                            <para>
                                Das Passwort des Rechnerkontos wird in der Regel automatisch erstellt und
                                rotiert. Für Sonderfälle wie die Einbindung externer Systeme kann es
                                in diesem Feld auch explizit konfiguriert werden.
                            </para>
                            <para>
                                Dasselbe Passwort muss dann auch lokal auf dem Rechner in die Datei
                                <filename>/etc/machine.secret</filename> eingetragen werden.
                            </para>
                        </entry>
                    </row>
                    <row>
                        <entry>Primäre Gruppe</entry>
                        <entry>
                            In diesem Auswahlfeld kann die primäre Gruppe des Rechners selektiert
                            werden. Das ist nur notwendig, wenn von den automatisch eingestellten
                            Vorgabewerten abgewichen werden soll. Der Vorgabewert für einen
                            DC Master oder DC Backup lautet <systemitem class="groupname">DC Backup Hosts</systemitem>, für einen
                            DC Slave <systemitem class="groupname">DC Slave Hosts</systemitem> und für &ucsMember; <systemitem class="groupname">Computers</systemitem>.
                        </entry>
                    </row>
                </tbody>
            </tgroup>
        </table>
        <table>
            <title>Reiter 'Unix-Konto' (erweiterte Einstellungen)</title>
            <tgroup cols="2">
                <colspec colnum="1" colname="col1" colwidth="1*"/>
                <colspec colnum="2" colname="col2" colwidth="2*"/>
                <thead>
                    <row>
                        <entry>Attribut</entry>
                        <entry>Beschreibung</entry>
                    </row>
                </thead>
                <tbody>
                    <row>
                        <entry>UNIX-Heimatverzeichnis (*)</entry>
                        <entry>
                            In diesem Eingabefeld kann ein abweichendes Heimatverzeichnis für das
                            Rechner-Konto eingetragen werden. Der automatisch eingestellte
                            Vorgabewert für das Heimatverzeichnis lautet <filename class="devicefile">/dev/null</filename>.
                        </entry>
                    </row>
                    <row>
                        <entry>Login-Shell</entry>
                        <entry>
                            Falls eine vom Vorgabewert abweichende Login-Shell für das
                            Rechner-Konto verwendet werden soll, kann die Login-Shell in diesem
                            Eingabefeld manuell angepasst werden. Der automatisch eingestellte
                            Vorgabewert sieht <filename>/bin/sh</filename> als Login-Shell vor.
                        </entry>
                    </row>
                </tbody>
            </tgroup>
        </table>
        <table>
            <title>Reiter 'Dienste' (erweiterte Einstellungen)</title>
            <tgroup cols="2">
                <colspec colnum="1" colname="col1" colwidth="1*"/>
                <colspec colnum="2" colname="col2" colwidth="2*"/>
                <thead>
                    <row>
                        <entry>Attribut</entry>
                        <entry>Beschreibung</entry>
                    </row>
                </thead>
                <tbody>
                    <row>
                        <entry>Dienst</entry>
                        <entry>
                            Mit einem Dienst-Objekt können Applikationen oder Dienste feststellen,
                            ob auf einem Rechner oder generell in der Domäne ein Dienst verfügbar
                            ist.
                        </entry>
                    </row>
                </tbody>
            </tgroup>
        </table>
        <note>
			<simpara>
            Die Karteikarte 'Dienste' wird nur auf UCS-Serversystemrollen angezeigt.
			</simpara>
        </note>
        <table>
            <title>Reiter '(Re)installation' (erweiterte Einstellungen)</title>
            <tgroup cols="1">
                <colspec colnum="1" colname="col1" colwidth="1*"/>
                <tbody>
                    <row>
                        <entry>
                             Diese Karteikarte wird für den Univention Net Installer verwendet, siehe <biblioref linkend="ext-doc-inst"/>.
                        </entry>
                    </row>
                </tbody>
            </tgroup>
        </table>
        <table>
            <title>Reiter 'DNS-Alias' (erweiterte Einstellungen)</title>
            <tgroup cols="2">
                <colspec colnum="1" colname="col1" colwidth="1*"/>
                <colspec colnum="2" colname="col2" colwidth="2*"/>
                <thead>
                    <row>
                        <entry>Attribut</entry>
                        <entry>Beschreibung</entry>
                    </row>
                </thead>
                <tbody>
                    <row>
                        <entry>Zone für DNS-Alias</entry>
                        <entry>
                            Wenn für den Rechner im Feld <guimenu>Forward Lookup Zone für
                            DNS-Eintrag</guimenu> ein Zoneneintrag zur Vorwärtsauflösung eingerichtet
                            wurde, können hier zusätzlich Alias-Einträge konfiguriert werden,
                            über die der Rechner erreichbar ist.
                        </entry>
                    </row>
                </tbody>
            </tgroup>
        </table>
        <table>
            <title>Reiter 'Gruppen' (erweiterte Einstellungen)</title>
            <tgroup cols="1">
                <colspec colnum="1" colname="col1" colwidth="1*"/>
                <tbody>
                    <row>
                        <entry>
                            In diesem Reiter kann der Rechner in verschiedene Gruppen aufgenommen werden.
                        </entry>
                    </row>
                </tbody>
            </tgroup>
        </table>
        <table>
            <title>Reiter 'Nagios-Dienste' (erweiterte Einstellungen)</title>
            <tgroup cols="1">
                <colspec colnum="1" colname="col1" colwidth="1*"/>
                <tbody>
                    <row>
                        <entry>
                            In diesem Reiter wird festgelegt, welche Nagios-Prüfungen für diesen
                            Rechner durchgeführt werden, siehe <xref linkend="nagios::hostconfig"/>.
                        </entry>
                    </row>
                </tbody>
            </tgroup>
        </table>
        <table>
            <title>Reiter 'Nagios-Benachrichtigung' (erweiterte Einstellungen)</title>
            <tgroup cols="1">
                <colspec colnum="1" colname="col1" colwidth="1*"/>
                <tbody>
                    <row>
                        <entry>
                            In diesem Reiter wird festgelegt, welche Benutzer bei fehlschlagenden
                            Nagios-Prüfungen benachrichtigt werden, siehe
                            <xref linkend="nagios::hostconfig"/>.
                        </entry>
                    </row>
                </tbody>
            </tgroup>
        </table>
        <table>
            <title>Reiter '(Optionen)'</title>
            <tgroup cols="2">
                <colspec colnum="1" colname="col1" colwidth="1*"/>
                <colspec colnum="2" colname="col2" colwidth="2*"/>
                <thead>
                    <row>
                        <entry>Attribut</entry>
                        <entry>Beschreibung</entry>
                    </row>
                </thead>
                <tbody>
					<row><!-- FIXME -->
						<entry namest="col1" nameend="col2">
                    Die Karteikarte ermöglicht es, einzelne LDAP-Objektklassen für den Rechner
                    zu konfigurieren. Die Eingabefelder für Attribute abgewählter Objektklassen
                    werden dann nicht angezeigt. Nicht alle Objektklassen können
                    nachträglich verändert werden.
						</entry>
					</row>
                    <row>
                        <entry>Kerberos Prinzipal</entry>
                        <entry>
                            Ist dieses Auswahlkästchen nicht markiert, erhält der Rechner die
                            Objektklassen <classname>krb5Principal</classname> und <classname>krb5KDCEntry</classname> nicht.
                        </entry>
                    </row>
                    <row>
                        <entry>POSIX Konto</entry>
                        <entry>
                            Ist dieses Auswahlkästchen nicht markiert, erhält der Rechner die
                            Objektklasse <classname>posixAccount</classname> nicht.
                        </entry>
                    </row>
                    <row>
                        <entry>Samba-Konto</entry>
                        <entry>
                            Ist dieses Auswahlkästchen nicht markiert, erhält der Rechner die
                            Objektklasse <classname>sambaSamAccount</classname> nicht.
                        </entry>
                    </row>
                    <row>
                        <entry>Nagios-Unterstützung</entry>
                        <entry>
                            Nur wenn diese Option aktiviert ist, können Nagios-Prüfungen für
                            dieses Rechnerkonto konfiguriert werden.
                        </entry>
                    </row>
                </tbody>
            </tgroup>
        </table>

        <section id="computers:ubuntu"><title>Integration von Ubuntu-Clients</title>
            <para>
                Ubuntu-Clients können mit einer eigenen Rechnerrolle in &ucsUMC;
                verwaltet werden. Die Netzwerkeigenschaften für DNS/DHCP können dabei
                ebenfalls mit &ucsUMC; verwaltet werden.
            </para>
            <para>
                Die Anwendung von Richtlinien wird nicht unterstützt.
            </para>
            <para>
                Auf den Ubuntu-Systemen müssen einige Konfigurationsanpassungen
                vorgenommen werden, die in der erweiterten Dokumentation beschrieben sind <biblioref linkend="ext-doc-domain"/>.
            </para>
        </section>
    </section>

    <section id="computers:Konfiguration_von_Hardware_und_Treibern"><title>Konfiguration von Hardware und Treibern</title>
        <section id="computers:Verfuegbare_Kernel-Varianten"><title>Verfügbare Kernel-Varianten</title>
			<para>
				Der Standard-Kernel in UCS 4.4 basiert auf dem Linux-Kernel 4.9.
				Prinzipiell sind drei verschiedene Arten von Kernel-Paketen zu unterscheiden:
			</para>
            <itemizedlist>
				<listitem>
					<simpara>
						Ein <emphasis>Kernel-Image-Paket</emphasis> stellt einen lauffähigen Kernel bereit, der
						installiert und gestartet werden kann.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Ein <emphasis>Kernel-Source-Paket</emphasis> stellt den Quellcode für einen Kernel
                    bereit. Aus diesem kann beispielsweise ein angepasster Kernel erstellt werden, indem
						Funktionen aktiviert oder deaktiviert werden können.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
						Ein <emphasis>Kernel-Header-Paket</emphasis> stellt Schnittstellen-Informationen bereit, die von externen
                    Paketen benötigt werden, wenn diese auf Kernel-Funktionen zugreifen
						müssen. Sie werden typischerweise zum Übersetzen externer Kernel-Treiber benötigt.
					</simpara>
				</listitem>
            </itemizedlist>
            <para>
                Im Regelfall ist für den Betrieb eines UCS-Systems nur die Installation eines
                Kernel-Image-Paketes notwendig.
            </para>
            <para>
                Der Standard-Kernel in UCS für i386-basierte Systeme ist der sogenannte <wordasword>bigmem-Kernel</wordasword> für Prozessoren mit PAE-Unterstützung, der 64 GB RAM unterstützt.
                Für ältere i386-basierte Systeme wird ein zweiter Kernel ohne PAE-Unterstützung bereitgestellt, der maximal 4 GB Arbeitsspeicher unterstützt.
                Der Standard-Kernel für amd64-Systeme besitzt keine solchen Einschränkungen.
            </para>
            <para>
                Mehrere Kernel-Varianten können parallel installiert sein. Dies stellt sicher, dass
                im Fehlerfall immer auf eine ältere Variante zurückgegriffen werden kann. Um
                ein System trotzdem immer auf dem jeweils aktuellen Stand halten zu können,
                werden sogenannte Meta-Pakete bereitgestellt, die immer auf die aktuell
                für UCS empfohlene Kernel-Version verweisen und diese im Update-Fall jeweils
                nachinstallieren.
            </para>
            <para>
                Die folgenden Meta-Pakete stehen unter i386 / 32 Bit zur Verfügung:
            </para>
			<itemizedlist>
				<listitem><simpara><package>univention-kernel-image</package> - Standard-Kernel (max. 64 GB RAM)</simpara></listitem>
				<listitem><simpara><package>univention-kernel-image-486</package> - Kernel für Systeme ohne PAE-Support (max. 4 GB RAM)</simpara></listitem>
			</itemizedlist>
            <para>
                Die folgenden Meta-Pakete stehen unter amd64 / 64 Bit zur Verfügung:
            </para>
			<itemizedlist>
				<listitem><simpara><package>univention-kernel-image</package> - Standard-Kernel</simpara></listitem>
			</itemizedlist>
        </section>

        <section id="computers:Treiber-Management__Kernel-Module"><title>Treiber-Management / Kernel-Module</title>
            <para>
                Der Boot-Prozess erfolgt zweistufig unter Verwendung einer Initial RAM
                Disk (kurz initrd). Diese besteht aus einem Archiv mit weiteren Treibern und Programmen.
                Der Boot-Manager GRUB (siehe <xref linkend="grub"/>) lädt den Kernel und die
                initrd in den Arbeitsspeicher, wo das initrd-Archiv entpackt und als
                temporäres Root-Dateisystem gemountet wird. Aus diesem wird dann das
                tatsächliche Root-Dateisystem eingebunden, woraufhin abschließend das
                temporäre Archiv wieder entfernt und der Systemstart eingeleitet wird.
            </para>
            <para>
                Die zu verwendenden Treiber werden beim Systemstart automatisch erkannt und
				durch den Device Manager <application>udev</application> geladen. Dabei werden außerdem die notwendigen
                System-Verknüpfungen unter <filename class="directory">/dev/</filename> angelegt. Wenn Treiber nicht erkannt
                werden (was vorkommen kann, wenn keine entsprechenden Hardware-IDs registriert
                sind oder Hardware verwendet wird, die nicht automatisch erkannt werden
                kann, etwa ISA-Steckkarten), so können zu ladende Kernel-Module
                durch die &ucsUCRV; <envar>kernel/modules</envar>
                hinzugefügt werden. Soll mehr als ein Kernel-Modul geladen werden, so
                müssen diese durch ein Semikolon voneinander getrennt werden.
				Mit der &ucsUCRV; <envar>kernel/blacklist</envar> kann eine Liste von einem oder
				mehreren Kernel-Modulen konfiguriert werden, für die das automatische Laden
				verhindert wird. Mehrere Einträge müssen ebenfalls durch ein Semikolon getrennt
				werden.
            </para>
            <para>
                Im Gegensatz zu anderen Betriebssystemen liefert der Linux-Kernel (von wenigen
                Ausnahmen abgesehen) alle Treiber für Komponenten aus einer Hand. Im Regelfall
                ist es deshalb nicht notwendig Treiber aus externen Quellen
                nachzuinstallieren.
            </para>
            <para>
                Wenn doch externe Treiber oder Kernelmodule benötigt werden, können diese über <emphasis>Dynamic Kernel Module Support</emphasis> (DKMS) eingebunden werden.
                Es stellt eine standardisierte Schnittstelle für Kernelquellen bereit und erlaubt es, Module automatisch für jeden installierten Kernel zu übersetzen.
                Dazu müssen neben dem Paket <package>dkms</package> auch die Kernel-Header-Pakete <package>univention-kernel-headers</package> für die gewünschten Kernel installiert werden.
                Zu beachten ist, dass nicht alle externen Kernelmodule mit allen Kernel kompatibel sind.
            </para>
        </section>

        <section id="grub"><title>GRUB Boot-Manager</title>
            <para>
                Als Boot-Manager wird in &ucsUCS; GNU GRUB 2
                verwendet. GRUB stellt ein Auswahlmenü bereit, aus dem eine zu
                bootende Linux-Kernel-Variante oder ein weiteres Betriebssystem ausgewählt werden kann.
                GRUB kann auch direkt auf Dateisysteme zugreifen, so dass im Fehlerfall
                etwa ein abweichender Kernel geladen werden kann.
            </para>
                <figure id="grub-selection"><title>GRUB-Auswahlmenü</title>
                    <graphic scalefit="1" width="80%" align="center" fileref="illustrations44/computers_grub.png"/>
                </figure>
            <para>
                GRUB wird in einem zweistufigen Verfahren geladen: in den Master
                Boot Record der Festplatte wird der Stage 1-Loader geschrieben, der auf die
                Daten der Stage 2 verweist, welche den Großteil des übrigen Boot-Vorgangs
                übernimmt.
            </para>
            <para>
                Die Auswahl der zu startenden Kernel im Boot-Menü wird in der Datei
                <filename>/boot/grub/grub.cfg</filename> abgelegt. Diese Datei wird automatisch generiert,
                es stehen alle installierten Kernel-Pakete zur Auswahl.
                Durch Auswahl der Option <guimenu>Memory test</guimenu> kann das
                Speicher-Testprogramm <command>Memtest86+</command> gestartet werden, das Konsistenzprüfungen auf
                dem Arbeitsspeicher durchführt.
            </para>
            <para>
                Standardmäßig wird fünf Sekunden auf die Auswahl des zu bootenden Kernels
                gewartet. Durch die &ucsUCRV; <envar>grub/timeout</envar> kann ein abweichender Wert in Sekunden
                konfiguriert werden.
            </para>
            <para>
				In der Grundeinstellung wird in einen <wordasword>800x600</wordasword> Pixel großen Bildschirm unter
                16 Bit Farbtiefe gewechselt. Durch die &ucsUCRV; <envar>grub/gfxmode</envar> kann ein anderer Modus ausgewählt
                werden. Es werden nur Auflösungen unterstützt, die über VESA BIOS Extentions
                gesetzte werden können. Eine Liste der verfügbaren Modi findet sich unter
                <ulink url="https://en.wikipedia.org/wiki/VESA_BIOS_Extensions"/>. Die Eingabe
				erfolgt im Format <userinput><replaceable>HORIZONTAL</replaceable>x<replaceable>VERTIKAL</replaceable>@<replaceable>FARBTIEFEBIT</replaceable></userinput>, also
                z.B. <literal>1024x768@16</literal>.
            </para>
            <para>
                Kernel-Optionen für die gestarteten Linux-Kernel können mit
                der &ucsUCRV; <envar>grub/append</envar> übergeben werden. Mit der <envar>grub/xenhopt</envar>
                können Optionen an den Xen-Hypervisor übergeben werden.
            </para>
            <para>
                Die grafische Darstellung während des Bootvorgangs - der sogenannte
                Splash-Screen - kann durch Setzen der &ucsUCRV; <envar>grub/bootsplash</envar> auf
                <literal>nosplash</literal> deaktiviert werden.
            </para>
            <para>
                In älteren Xen-Umgebungen wird zum Booten paravirtualisierter Systeme
                noch eine Version von PyGrub verwendet, die
                auf die ältere GRUB 1-Konfigurationsdatei <filename>/boot/grub/menu.lst</filename>
                angewiesen ist. Diese wird automatisch erzeugt, sofern sie noch nicht existiert.
                Dieses Verhalten kann durch Setzen der
                &ucsUCRV; <envar>grub/generate-menu-lst</envar> auf <literal>no</literal> deaktiviert werden.
            </para>
        </section>

        <section id="hardware::networkconfiguration"><title>Netz-Konfiguration</title>
            <section id="computers:Netzwerk-Interfaces"><title>Netzwerk-Interfaces</title>
				<para>
                Die Konfiguration von Netzwerk-Interfaces kann in &ucsUMC; über das Modul
                <guimenu>Netzwerk-Einstellungen</guimenu> angepasst werden.
				</para>
                <para>
                    Die Konfiguration wird in &ucsUCR;-Variablen gespeichert, die auch
                    direkt gesetzt werden können. Die Variablen sind in den einzelnen Abschnitten
                    zusätzlich in Klammern aufgeführt.
                    <figure id="network-settings"><title>Konfiguration der Netzwerkeinstellungen</title>
                        <graphic scalefit="1" width="90%" align="center" fileref="illustrations44/computers_network_de.png"/>
                    </figure>
                    Unter <guimenu>IPv4-Netzwerkgeräte</guimenu> und
                    <guimenu>IPv6-Netzwerkgeräte</guimenu> werden alle im System verfügbaren
                    Netzwerkkarten aufgeführt (es werden nur Netzwerkinterfaces im Schema
                    <filename class="devicefile">ethX</filename> dargestellt).
                </para>
                <para>
                    Netzwerkschnittstellen können für IPv4 und/oder IPv6 konfiguriert
                    werden. IPv4-Adressen haben 32 Bit Länge und werden in der Regel in vier
					Blöcken in Dezimalschreibweise dargestellt (z.B. <systemitem class="ipaddress">192.0.2.10</systemitem>), während
                    IPv6-Adressen vier Mal so lang sind und typischerweise hexadezimal dargestellt
					werden (z.B. <systemitem class="ipaddress">2001:0DB8:FE29:DE27:0000:0000:0000:0000</systemitem>).
                </para>

                <section id="computers:ipv4"><title>Konfiguration von IPv4-Adressen</title>
                    <para>
                        Wenn die Option <guimenu>Dynamisch (DHCP)</guimenu> nicht gewählt wurde, muss die IP-Adresse
                        eingegeben werden, die an die Netzwerkkarte gebunden werden soll. Zusätzlich
                        zur <guimenu>IPv4-Adresse</guimenu> muss die <guimenu>Netzmaske</guimenu> angegeben
                        werden. Mit <guimenu>DHCP-Anfrage</guimenu> kann eine Adresse von einem
                        DHCP-Server abgefragt werden. Sofern die Option <guimenu>Dynamisch
						(DHCP)</guimenu> nicht aktiviert wird, werden die aus der DHCP-Anfrage
						erhaltenen Werte dann statisch konfiguriert.
                    </para>
                    <para>
                        Auch Server-Systeme können per DHCP konfiguriert werden. Dies ist
                        z.B. bei einigen Cloud-Anbietern notwendig.
                        Schlägt die Vergabe einer IP-Adresse für einen Server fehl, wird
                        ersatzweise eine zufällige Link-Local-Adresse (<systemitem class="ipaddress">169.254.<replaceable>x</replaceable>.<replaceable>y</replaceable></systemitem>) konfiguriert.
                    </para>
                    <para>
                        Die über DHCP erhaltene Adresse wird für UCS-Serversysteme auch in das
                        LDAP-Verzeichnis geschrieben.
                    </para>
                    <note>
						<simpara>
                        Nicht alle Dienste (z.B. DNS-Server) sind für eine Verwendung auf einem DHCP-basierten
						Server geeignet.
						</simpara>
					</note>
                    <para>
                        (UCR-Variablen: <envar>interfaces/ethX/address</envar>, <envar>interfaces/ethX/netmask</envar>, <envar>interfaces/ethX/type</envar>)
                    </para>
                    <para>
                        Neben den physischen Interfaces können auch zusätzliche virtuelle Interfaces in der Form
                        <envar>interfaces/ethX_Y/Eigenschaft</envar> definiert werden.
                    </para>
                </section>

                <section id="computers:ipv6">
				  <title>Konfiguration von IPv6-Adressen</title>
				  <para>
					Die IPv6-Adresse kann auf zwei Arten konfiguriert werden: Bei der
					<guimenu>Automatischen Konfiguration (SLAAC)</guimenu> kommt Stateless Address
					Autoconfiguration (SLAAC) zum Einsatz. Dabei wird die IP-Adresse von den Routern
					des lokalen Netzsegmentes zugewiesen. Alternativ kann die Adresse auch durch
					Angabe von <guimenu>IPv6-Adresse</guimenu> und <guimenu>IPv6-Präfix</guimenu>
					statisch konfiguriert werden. Im Gegensatz zu DHCP wird bei SLAAC keine
					Zuweisung von weitergehenden Daten wie dem zu verwendenden DNS-Server
					durchgeführt. Hierfür gibt es mit DHCPv6 ein Zusatzprotokoll, das bei der
					dynamischen Zuweisung aber nicht zum Einsatz kommt. Eine Netzwerkkarte kann
					verschiedene IPv6-Adressen bedienen. Der <guimenu>Bezeichner</guimenu>
					ist ein eindeutiger Name für einzelne Adressen. Die Haupt-Adresse verwendet
					immer den Bezeichner <emphasis>default</emphasis>, für alle anderen Adressen können
					funktionale Bezeichner vergeben werden z.B. <emphasis>Interface-Mailserver</emphasis>.
				  </para>

                    <para>
                        (UCR-Variablen: <envar>interfaces/ethX/ipv6/address</envar>,
                        <envar>interfaces/ethX/ipv6/prefix</envar>,
                        <envar>interfaces/eth0/ipv6/acceptRA</envar> aktiviert SLAAC).
                    </para>
                    <para>
                        Unter <guimenu>Globale Netzwerk-Einstellungen</guimenu> können weitere
                        netzwerkbezogene Einstellungen vorgenommen werden.
                    </para>
                    <para>
                        Unter <guimenu>Gateway (IPv4)</guimenu> und <guimenu>Gateway (IPv6)</guimenu> können die für
                        die IP-Adresse im Subnetz eingesetzten Standard-Gateways für IPv4
                        und IPv6 eingegeben werden. Für IPv6 ist die Angabe eines Gateways nicht
                        erforderlich, wird jedoch empfohlen. Ein hier konfiguriertes IPv6-Gateway hat
                        Vorrang vor Router Advertisements, die ansonsten die Route ändern könnten.
                    </para>
                    <para>
                        (UCR-Variablen: <envar>gateway</envar>, <envar>ipv6/gateway</envar>)
                    </para>
                </section>

                <section id="computers:Konfiguration_der_Nameserver"><title>Konfiguration der Nameserver</title>
					<para>
                    Zwei Typen von DNS-Servern werden unterschieden:
				</para>
                    <itemizedlist>
						<listitem>
							<simpara>
							Ein <guimenu>externer DNS-Server</guimenu> wird für die Auflösung von
                            Rechnernamen und Adressen außerhalb der UCS-Domäne verwendet,
                            z.B. <systemitem class="domainname">univention.de</systemitem>. Dies ist typischerweise ein Nameserver, der vom
							Internet Provider betrieben wird.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
							Ein <guimenu>Domänen-DNS-Server</guimenu> ist ein lokaler Nameserver der
                            UCS-Domäne. Dort werden in der Regel die Rechnernamen und IP-Adressen der
                            UCS-Domäne verwaltet. Wird eine Adresse im lokalen Datenbestand nicht
                            aufgefunden, wird automatisch ein externer DNS-Server angefragt. Die DNS-Daten
                            werden im LDAP-Verzeichnisdienst gespeichert, d.h. alle Domänen-DNS-Server
							liefern identische Daten aus.
							</simpara>
						</listitem>
                    </itemizedlist>
                    <para>
                        Bei der Installation eines &ucsMaster; wird nur ein <guimenu>externer
                        DNS-Server</guimenu> abgefragt, da im Rahmen der Installation immer ein
                        Domänen-DNS-Server eingerichtet wird. Dieser kann dann von den anderen
                        Systemen der Domäne verwendet wird. Über die Schaltfläche <mousebutton>Mehr</mousebutton>
                        können weitere Nameserver aufgenommen werden.
                    </para>
                    <para>
                        Auf den Systemrollen &ucsMaster;, &ucsBackup; und &ucsSlave; läuft ein
                        lokaler DNS-Server. Hier kann durch Angabe von
                        <guimenu>Domänen-DNS-Server</guimenu> konfiguriert werden, welcher Server primär
                        für die Namensauflösung verwendet wird.
                    </para>
                    <para>
                        (UCR-Variablen: <envar>nameserver1</envar> bis <envar>nameserver3</envar>,
                        <envar>dns/forwarder1</envar> bis <envar>dns/forwarder3</envar>,
                    </para>
                </section>

                <section id="computers:networkcomplex">
				  <title>Konfiguration von Bridges/Bonding/VLANs</title>
				  <para>
					UCS unterstützt komplexe Netzwerk-Konfigurationen mit Bridges, Bonding und VLAN-Netzen:
				  </para>

				  <itemizedlist>
					<listitem><simpara>
					  <emphasis>Bridges</emphasis> werden oft von Virtualisierungslösungen verwendet, um virtualisierte
					  Netzwerkkarten einer virtuellen Maschine mit der physischen Netzwerkkarte des
					  Virtualisierungsservers zu verbinden.
					</simpara></listitem>

					<listitem><simpara>
					  <emphasis>Bonding</emphasis> erhöht die Ausfallsicherheit, in dem mehrere physikalische
					  Netzwerkkarten für den Zugriff auf ein Netzwerk gebündelt werden.
					</simpara></listitem>

					<listitem><simpara>
					  <emphasis>VLANs</emphasis> können verwendet werden um den Netzwerkverkehr in einem physikalischen
					  Netzwerk logisch auf ein oder mehrere virtuelle Unternetze aufzuteilen.
					</simpara></listitem>
				  </itemizedlist>

				  <section id="computers:networkcomplex:bridge">
					<title>Bridging
						<indexterm><primary>Netzwerk</primary><secondary>Bridge</secondary></indexterm>
						<indexterm><primary>Netzwerk</primary><secondary>Switch</secondary><see>Bridge</see></indexterm>
					</title>

					<para>
					  Der häufigste Anwendungsfall für <emphasis>Bridging</emphasis> ist die gemeinsame Nutzung einer
					  physischen Netzwerkkarte durch eine oder mehrere virtuelle Maschinen. Anstatt eine Netzwerkkarte
					  für jede virtuelle Maschine und den Virtualisierungsserver selbst zu verwenden,
					  werden alle System durch einen gemeinsamen Uplink angebunden. Eine Bridge kann
					  mit einem in Software realisierten Switch verglichen werden, über den einzelne Hosts miteinander verbunden werden.
					  Die verwendete Hardware-Netzwerkkarte wird als <emphasis>Bridge Port</emphasis> bezeichnet.
					</para>

					<para>
					  Um eine Bridge zu konfigurieren muss unter <guimenu>Hinzufügen</guimenu> als <guimenu>Netzwerkgerätetyp</guimenu>
					  <emphasis>Bridge</emphasis> ausgewählt werden. Der <guimenu>Name des neuen
					  Bridge-Netzwerkgerätes</guimenu> kann beliebig gewählt werden. Anschließend
					  muss auf <guimenu>Weiter</guimenu> geklickt werden.
					</para>

					<para>
					  Unter <guimenu>Bridge ports</guimenu> kann die physische Netzwerkkarte
					  ausgewählt werden, die den Uplink darstellt. Im typischen Anwendungsfall der
					  Anbindung virtueller Maschinen über nur eine Netzwerkkarte kann keine
					  Schleife auftreten. Wird die Bridge zur Verbindung zweier
					  Netzwerkkarten verwendet, wird das Spanning Tree Protocol (STP) zur Vermeidung
					  von Netzwerkschleifen eingesetzt<footnote><para>Der Linux-Kernel implementiert lediglich STP, nicht die Varianten Rapid STP oder Multiple STP.</para></footnote>.
					  Die Einstellung <guimenu>Forwarding
					  delay</guimenu> konfiguriert die Wartezeit in Sekunden, während der bei Aufbau
					  einer Verbindung durch STP Informationen über die Netzwerktopologie gesammelt
					  werden. Wird die Bridge zur Anbindung virtueller Maschinen über eine
					  physische Netzwerkkarte verwendet, sollte STP dann deaktiviert werden, in dem der
					  Wert auf 0 gesetzt wird. Ansonsten kann es zu Problemen bei der Verwendung von
					  <acronym>DHCP</acronym> führen, da die während der Wartezeit versendeten
					  Pakete nicht weitergeleitet werden.
					</para>

					<para>
					  Über das Eingabefeld <guimenu>Weitere
					  Geräteoptionen</guimenu> können beliebige weitere Bridge-Parameter
					  konfiguriert werden. Dies ist nur in Ausnahmefällen nötig, eine Übersicht der
					  möglichen Einstellungen findet sich in der Manpage
					  <citerefentry><refentrytitle>bridge-utils-interfaces</refentrytitle><manvolnum>5</manvolnum></citerefentry>.
					</para>

					<para>
					  Nach einem Klick auf <guimenu>Weiter</guimenu> kann der Bridge optional eine IP-Adresse zugewiesen werden.
					  Diese kann dann auch als Netzwerkinterface auf dem Virtualisierungshost verwendet
					  werden. Die Einstellungsmöglichkeiten sind dieselben wie in  <xref
					  linkend="computers:ipv4"/> und <xref linkend="computers:ipv6"/> beschrieben.
					</para>
				  </section>

				  <section id="computers:networkcomplex:bonding">
					<title>Bonding
						<indexterm><primary>Netzwerk</primary><secondary>Bonding</secondary></indexterm>
						<indexterm><primary>Netzwerk</primary><secondary>Kanalbündelung</secondary><see>Bonding</see></indexterm>
						<indexterm><primary>Netzwerk</primary><secondary>Link aggregation</secondary><see>Bonding</see></indexterm>
						<indexterm><primary>Netzwerk</primary><secondary>Etherchannel</secondary><see>Bonding</see></indexterm>
						<indexterm><primary>Netzwerk</primary><secondary>Teaming</secondary><see>Bonding</see></indexterm>
						<indexterm><primary>Netzwerk</primary><secondary>Trunking</secondary><see>Bonding</see></indexterm>
					</title>

					<para>
					  Mit <emphasis>Bonding</emphasis> können zwei (oder mehr)
					  physische Netzwerkkarten zur Erhöhung des Durchsatzes oder zur Verbesserung der
					  Redundanz in Failoverszenarien gebündelt werden.
					</para>

					<para>
					  Um ein Bonding zu konfigurieren muss unter <guimenu>Hinzufügen</guimenu> als <guimenu>Netzwerkgerätetyp</guimenu>
					  <emphasis>Kanalbündelung (Bonding)</emphasis> ausgewählt werden. Der <guimenu>Name des neuen
					  Bonding-Netzwerkgerätes</guimenu> kann beliebig gewählt werden. Anschließend
					  muss auf <guimenu>Weiter</guimenu> geklickt werden.
					</para>

					<para>
					  Unter <guimenu>Bond slaves</guimenu> werden die Netzwerkkarten ausgewählt, die
					  Teil des Bonding-Interfaces sind.
					  Für das Failover-Szenarien (s.u.) können über <guimenu>Bond primary</guimenu> die Netzwerkkarten ausgewählt werden, die bevorzugt verwendet werden sollen.
					</para>

					<para>
					  Der <guimenu>Modus</guimenu> konfiguriert die Verteilung der Netzwerkkarten
					  innerhalb des Bondings:

					  <itemizedlist>
						<listitem><simpara>
						  <guimenuitem>balance-rr (0)</guimenuitem> verteilt die Pakete der Reihe nach
						  gleichmässig auf die verfügbaren Netzwerkschnittstellen innerhalb des
						  Bondings. Dies erhöht den Durchsatz und verbessert die Ausfallsicherheit.
						  Zur Verwendung dieser Variante müssen die verwendeten Netzwerk-Switches
						  <emphasis>Link Aggregation</emphasis> unterstützen.
						</simpara></listitem>

						<listitem><simpara>
						  Bei Verwendung von <guimenuitem>active-backup (1)</guimenuitem> ist nur jeweils
						  eine Netzwerkkarte des Bonding-Interfaces aktiv (in der Grundeinstellung
						  die Netzwerkschnittstelle aus <guimenu>Bond primary</guimenu>). Fällt die
						  primäre Netzwerkkarte aus, wird dies durch den Linux-Kernel erkannt und
						  auf eine der weiteren Karten des Bondings umgeschaltet. Diese Variante
						  erhöht die Ausfallsicherheit. Sie kann mit jedem Netzwerk-Switch verwendet werden.
						</simpara></listitem>
					  </itemizedlist>

					  Darüber hinaus existieren noch weitere Bonding-Methoden. Diese sind in der
					  Regel nur für Sonderfälle relevant und sind unter <xref linkend="bonding"/>
					  beschrieben.
					</para>

					<para>
					  Zur Erkennung ausgefallener Netzwerkverbindungen wird das Media Independent Interface (MII)
					  der Netzwerkkarten verwendet. Die Einstellung <guimenu>MII link monitoring
					  frequency</guimenu> legt das Prüfintervall in Millisekunden fest.
					</para>

					<para>
					  Unter <guimenu>Weitere Bonding-Optionen</guimenu> können beliebige weitere
					  Bonding-Parameter konfiguriert werden. Dies ist nur in Ausnahmefällen nötig,
					  eine Übersicht der möglichen Einstellungen findet sich unter <xref
					  linkend="bonding"/>.
					</para>

					<para>
					  Nach einem Klick auf <guimenu>Weiter</guimenu> kann dem Bonding-Interface eine
					  IP-Adresse zugewiesen werden. Sollte eine der bestehenden Netzwerkkarten, die
					  Bestandteil des Bonding-Interfaces sind schon eine IP-Adresse zugewiesen
					  haben, so wird diese Konfiguration entfernt. Die Einstellungsmöglichkeiten sind dieselben wie in  <xref
					  linkend="computers:ipv4"/> und <xref linkend="computers:ipv6"/> beschrieben.
					</para>
				  </section>

				  <section id="computers:networkcomplex:vlan">
					<title>VLANs
						<indexterm><primary>Netzwerk</primary><secondary>VLAN</secondary></indexterm>
						<indexterm><primary>Netzwerk</primary><secondary>802.1q</secondary><see>VLAN</see></indexterm>
					</title>
					<para>
					  VLANs können verwendet werden um den Netzwerkverkehr in einem physischen
					  Netzwerk logisch auf ein oder mehrere virtuelle Unternetze aufzuteilen. Jedes
					  dieser virtuellen Netze ist eine eigenständige Broadcast-Domäne.
					  So kann etwa in einem Firmennetzwerk das Netz für die Mitarbeiter von einem Gastnetz für Besucher unterschieden werden, obwohl die selbe physikalische Verkabelung genutzt wird.
					  Die Zuordnung der einzelnen Endgeräte zu den VLANs erfolgt durch Konfiguration auf den verwendeten Switches.
					  Die Netzwerk-Switches müssen 802.1q VLANs unterstützen.
					</para>

					<para>
					  Es werden zwei Typen von Verbindungen zwischen Netzwerkkarten unterschieden:
					</para>

					  <itemizedlist>
						<listitem>
						  <para>
							Eine Verbindung transportiert nur Pakete eines spezifischen VLANs.
							In diesem Fall werden die Datenpakete <firstterm>ungetagged</firstterm> übertragen.
						  </para>
						  <para>
							Dies ist typischerweise der Fall, wenn nur ein einzelnes Endgerät über diese Netzwerkverbindung angebunden wird.
						  </para>
						</listitem>

						<listitem>
						  <para>
							Eine Verbindung transportiert Pakete aus mehreren VLANs.
							Dies wird auch als <firstterm>trunk link</firstterm> bezeichnet.
							In diesem Fall ist jedes Paket über eine VLAN-ID einem VLAN zugeordnet.
							Bei der Weiterleitung zwischen <quote>trunk links</quote> und spezifischen VLANs übernimmt der Netzwerk-Switch die Aufgabe, anhand der VLAN-IDs die Pakete zu filtern und die VLAN-IDs hinzuzufügen und zu entfernen.
						  </para>
						  <para>
							Diese Verbindungsart wird vornehmlich zwischen Switches bzw. Servern eingesetzt.
						  </para>
						  <para>
							Einige Switches erlauben es auch Pakete mit und ohne VLAN-Tag über eine
							gemeinsame Verbindung zu schicken, darauf wird hier aber nicht weiter
							eingegangen.
						  </para>
						</listitem>
					  </itemizedlist>

					<para>
					  Mit der Konfiguration eines VLANs in &ucsUMC; kann für einen Rechner
					  konfiguriert werden, an welchen VLANs er teilnehmen möchte. Ein Beispiel wäre
					  ein interner Firmen-Webserver, der sowohl für die Mitarbeiter, als auch für
					  die Benutzer des Gastnetzes verfügbar sein soll.
					</para>

					<para>
					  Um ein VLAN zu konfigurieren muss unter <guimenu>Hinzufügen</guimenu> als <guimenu>Netzwerkgerätetyp</guimenu>
					  <emphasis>Virtuelles LAN</emphasis> ausgewählt werden. Die
					  Netzwerkschnittstelle, für die das VLAN konfiguriert wird, wird mit
					  <guimenu>Übergeordnetes Netzwerkgerät</guimenu> angegeben. Die <guimenu>VLAN
					  ID</guimenu> ist der eindeutige Bezeichner für das VLAN. Gültige Werte sind 1
					  bis 4095. Anschließend muss auf <guimenu>Weiter</guimenu> geklickt werden.
					</para>

					<para>
					  Nach einem Klick auf <guimenu>Weiter</guimenu> kann dem VLAN-Interface eine
					  IP-Adresse zugewiesen werden. Die Einstellungsmöglichkeiten sind dieselben wie in <xref
					  linkend="computers:ipv4"/> und <xref linkend="computers:ipv6"/> beschrieben.
					  Bei der Vergabe einer IP-Adresse muss darauf geachtet werden, dass die Adresse zum zugeordneten VLAN-Adressbereich passt.
					</para>
				  </section>
				</section>
            </section>

           <section id="computers:Konfiguration_des_Proxyzugriffs"><title>Konfiguration des Proxyzugriffs</title>
                <para>
                    Die meisten Kommandozeilen-Tools, die Zugriffe auf Webserver durchführen (z.B.
                    <command>wget</command>, <command>elinks</command> oder <command>curl</command>), prüfen, ob die Umgebungsvariable
                    <command>http_proxy</command> gesetzt ist. Ist dies der Fall, wird automatisch der
                    in dieser Variable eingestellte Proxy-Server verwendet.
                </para>
                <para>
                    Über die &ucsUCRV; <envar>proxy/http</envar> kann das Setzen dieser
                    Umgebungsvariable <command>http_proxy</command> durch einen Eintrag in <filename>/etc/profile</filename> aktiviert
                    werden. Dabei muss die Proxy-URL angegeben werden, also
                    z.B. <uri>http://192.0.2.100</uri>.
                </para>
                <para>
                    Der Proxy-URL kann optional auch die Angabe eines Ports folgen, welcher durch einen
                    Doppelpunkt abzutrennen ist, z.B. <uri>http://192.0.2.100:3128</uri>. Erfordert der Proxy eine
                    Authentifizierung des zugreifenden Benutzers, so können die Benutzerinformationen in der Form
                    <uri>http://username:password@192.0.2.100</uri> übergeben werden.
                </para>
                <para>
                    Die Umgebungsvariable wird nicht für aktuell geöffnete Sitzungen übernommen. Damit
                    die Änderung aktiv wird, muss eine Neuanmeldung erfolgen.
                </para>
                <para>
                    Die UCS-Programme zur Paketverwaltung unterstützen ebenfalls den Betrieb über
                    einen Proxy und lesen die &ucsUCR;-Variable direkt aus.
                </para>
                <para>
                    Einzelne Domänen können von der Verwendung des Proxys ausgenommen werden, in
                    dem sie kommasepariert in die &ucsUCRV; <envar>proxy/no_proxy</envar> aufgenommen werden.
                    Unterdomänen werden dabei berücksichtigt; eine Ausnahme für <uri>software-univention.de</uri>
                    wirkt sich also auch auf <uri>updates.software-univention.de</uri> aus.
                </para>
            </section>
        </section>

        <section id="computers:Konfiguration_der_Bildschirmeinstellungen"><title>Konfiguration der Bildschirmeinstellungen</title>
            <para>
                Die Konfiguration der Grafikauflösungen und Monitor-Parameter erfolgt
                in der Grundeinstellung über eine automatische Erkennung der
                Grafikkarte und des Monitors. Dabei wird automatisch der
                beste für die Grafikkarte verfügbare Treiber ausgewählt und die
                Monitorauflösung auf den höchsten vom Monitor unterstützten Wert
                gesetzt.
            </para>
            <para>
                Die Einstellungen können auch über eine &ucsUCR;-Richtlinie gesetzt werden.
                Die manuelle Konfiguration ist auch nötig, wenn ein Dual-Monitor-Betrieb verwendet
                werden soll. Im folgenden eine Auswahl der wichtigen Einstellungen
                und die dazugehörigen UCR-Variablen in Klammern:
            </para>
            <itemizedlist>
				<listitem>
					<simpara>
					<guimenu>Grafikkarten-Treiber</guimenu> wählt den zuständigen
					Xorg-Treiber aus (<envar>xorg/device/driver</envar>).
					</simpara>
				</listitem>
				<listitem>
					<simpara>
					Unter <guimenu>Auflösung des primären Monitors</guimenu> ist die
                    Bildschirmauflösung des Hauptmonitors einzutragen. Die Angabe von
                    Breite und Höhe in Pixeln ist durch ein "x" zu trennen,
					z.B. <literal>1024x768</literal> (<envar>xorg/resolution</envar>).
					</simpara>
				</listitem>
				<listitem>
					<simpara>
					<guimenu>Auflösung des sekundären Monitors</guimenu> definiert die
                    Bildschirmauflösung eines eventuellen zweiten Monitors. Dieser
                    bildet zusammen mit dem primären Monitor eine gemeinsame
					Bildschirmfläche (<envar>xorg/resolution/secondary</envar>).
					</simpara>
				</listitem>
				<listitem>
					<simpara>
					Das Auswahlfeld <guimenu>Position des sekundären Monitors</guimenu>
                    gibt die relative Position des sekundären Monitors gegenüber dem
					primären Monitor an (<envar>xorg/display/relative-position</envar>).
					</simpara>
				</listitem>
				<listitem>
					<simpara>
					Die <guimenu>Farbtiefe</guimenu> ist in Bit pro Pixel
                    anzugeben. Zulässige Werte sind 1, 2, 4, 8, 16 und 24. (24 Bit ist
					True Color-Farbtiefe) (<envar>xorg/screen/DefaultDepth</envar>).
					</simpara>
				</listitem>
            </itemizedlist>
        </section>

        <section id="computers:Einbinden_von_NFS-Freigaben"><title>Einbinden von NFS-Freigaben</title>
			<para>
            Mit der Richtlinie <guimenu>NFS-Freigaben</guimenu> der Rechnerverwaltung
            in &ucsUMC; können NFS-Freigaben konfiguriert werden, die auf dem
            System gemountet werden. Zur Auswahl steht eine
            <guimenu>NFS-Freigabe</guimenu>, die unter dem in <guimenu>Mount
            point</guimenu> angegebenen Dateipfad eingehängt wird.
            <figure id="nfs-mount"><title>Einbinden einer NFS-Freigabe</title>
                <graphic scalefit="1" width="100%" fileref="illustrations44/computers_policy_nfsshare_de.png"/>
            </figure>
			</para>
        </section>

        <section id="computers:hardware:sysinfo"><title>Erfassung von unterstützter Hardware</title>
            <para>
                Univention erfasst Informationen über Hardware, die mit UCS kompatibel und bei Kunden im Einsatz ist.
                Die hierbei verarbeiteten Informationen werden über das UMC-Modul <guimenu>Systeminformationen</guimenu> erfasst.
            </para>
            <para>
                Alle Daten werden dabei anonymisiert an Univention weitergeleitet und erst nach
                Benutzereinwilligung übermittelt.
            </para>
            <para>
                Im Start-Dialog finden sich die Eingabefelder <guimenu>Hersteller</guimenu> und
                <guimenu>Modell</guimenu>, die mit aus den DMI-Informationen der Hardware
                ermittelten Werten vorausgefüllt sind. Die Felder können auch angepasst und
                ein zusätzlicher <guimenu>Kommentar</guimenu> angegeben werden.
            </para>
            <para>
                Wenn die Übermittlung der Systeminformationen im Rahmen einer Support-Anfrage
                erfolgt, sollte die Option <guimenu>Dies bezieht sich auf einen
                Supportfall</guimenu> aktiviert werden. Im folgenden Feld kann dann eine Ticketnummer
                angegeben werden, die die Zuordnung vereinfacht und eine schnellere
                Bearbeitung ermöglicht.
            </para>
            <para>
                Nach einem Klick auf <guimenu>Weiter</guimenu> wird eine Übersicht der ermittelten
                Systeminformationen ausgegeben. Außerdem wird ein komprimiertes Tar-Archiv
                erstellt, das eine Liste mit den im System verwendeten Hardware-Komponenten
                enthält und über <guimenu>Archiv mit den Systeminformationen</guimenu>
                heruntergeladen werden kann.
            </para>
            <para>
                Nach einem erneuten Klick auf <guimenu>Weiter</guimenu> kann der Übermittlungsweg der
                Daten an Univention ausgewählt werden. <guimenu>Hochladen</guimenu> überträgt die
                Daten per HTTPS, <guimenu>Mail senden</guimenu> führt zu
                einem Dialog, der die für den Versand nötigen Schritte aufführt.
            </para>
        </section><!-- Erfassung von unterstützter Hardware -->
    </section><!--Konfiguration von Hardware und Treibern -->

    <section id="computers:Verwaltung_der_lokalen_Systemkonfiguration_mit_Univention_Configuration_Registry"><title>Verwaltung der lokalen Systemkonfiguration mit Univention Configuration Registry</title>
        <section id="computers:ucr:Einfuehrung"><title>Einführung</title>
            <para>
                &ucsUCR; ist das zentrale Werkzeug zur Verwaltung der
                lokalen Systemkonfiguration eines UCS-basierten Systems. Ein direktes
                Editieren der Konfigurationsdateien ist dabei in der Regel nicht nötig.
            </para>
            <para>
                Einstellungen werden in einem Registrierungsmechanismus in einem
                einheitlichen Format festgelegt, den sogenannten <emphasis>Univention Configuration Registry-Variablen</emphasis>.
                Diese Variablen werden verwendet, um aus Konfigurationsdatei-Vorlagen
                (den sogenannten <emphasis>Univention Configuration Registry-Templates</emphasis>) die effektiv von den
                Diensten/Programmen verwendeten Konfigurationsdateien zu generieren.
            </para>
            <para>
                Dieses Verfahren bietet eine Reihe von Vorteilen:
            </para>
                <itemizedlist>
					<listitem>
						<simpara>
						In der Regel müssen keine Konfigurationsdateien manuell
                        editiert werden. Dies vermeidet Fehler durch ungültige Syntax von
						Konfigurationseinstellungen o.ä.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
						Es existiert ein einheitliches Interface zum Editieren der
                        Einstellungen und die unterschiedlichen Syntaxformate der
						Konfigurationsdateien werden vor dem Administrator verborgen.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
						Die Einstellungen werden von der eigentlichen
                        Konfigurationsdatei entkoppelt, d.h. wenn eine Software in einer neuen
                        Version ein anderes Konfigurationsformat verwendet, wird einfach ein
                        neues Template im neuen Format ausgeliefert anstatt eine aufwendige
						und fehlerträchtige Konvertierung der bestehenden Konfigurationsdatei vorzunehmen.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
						Die in einer durch &ucsUCR; verwalteten Konfigurationsdatei
                        verwendeten Variablen werden intern zugeordnet. Das stellt sicher, dass
                        beim Ändern einer UCR-Variable alle Konfigurationsdateien, auf
						die sich die veränderte Variable bezieht, neu erstellt werden.
						</simpara>
					</listitem>
                </itemizedlist>
            <para>
                &ucsUCR;-Variablen können auf der Kommandozeile über den
                Befehl <command>univention-config-registry</command> (Kurzform: <command>ucr</command>)
				oder über das UMC-Modul <guimenu>Univention Config Registry</guimenu> konfiguriert werden.
            </para>
            <para>
                Da die meisten Pakete ihre Konfiguration über &ucsUCR; durchführen
                und bei der Installation entsprechende Grundeinstellungen eingerichtet
                werden, sind nach der Installation eines UCS-Systems bereits einige
                Hundert &ucsUCR;-Variablen gesetzt.
            </para>
            <para>
                UCR-Variablen können auch effizient in Shell-Skripten
                verwendet werden, um auf Systemeinstellungen wie den Rechnernamen zuzugreifen.
            </para>
            <para>
                Die Benennung der Variablen folgt einer baumartigen Struktur, wobei
                ein Schrägstrich als Trennzeichen von Namensbestandteilen verwendet
                wird. Beispielsweise handelt es sich bei allen mit <literal>ldap</literal>
                beginnenden &ucsUCR;-Variablen um Einstellungen, die den lokalen
                Verzeichnisdienst betreffen.
            </para>
            <para>
                Zu den meisten Variablen ist eine Beschreibung hinterlegt, die die
                Verwendung und Funktion erläutert.
            </para>
            <para>
                Wenn eine Konfigurationsdatei durch ein UCR-Template verwaltet wird
                und die gewünschte Einstellung nicht bereits durch eine vorhandene
                Variable abgedeckt ist, muss statt der Konfigurationsdatei das
                UCR-Template erweitert werden. Würde die Konfigurationsdatei direkt
                angepasst, würde bei der nächsten Neugenerierung der Datei - z.B. beim
                Setzen einer registrierten UCR-Variable - die lokale Anpassung wieder
                überschrieben. Die Anpassung von UCR-Templates ist in <xref linkend="ucr::templates::extend"/> beschrieben.
            </para>
            <para>
                Ein Teil der über &ucsUCR; konfigurierten Einstellungen sind
                systemspezifisch (z.B. der Rechnername), viele Eigenschaften können
                jedoch auch auf mehrere Rechner angewendet werden. Mithilfe der
                <emphasis>Univention Configuration Registry-Richtlinie</emphasis> in den
                UMC-Modulen zur Domänenverwaltung können Variablen zusammengefasst und
                auf mehr als einen Rechner angewendet werden.
            </para>
            <para>
                Die Auswertung der &ucsUCR;-Variablen auf einem UCS-System erfolgt
                vierstufig:
            </para>
                <itemizedlist>
					<listitem>
						<simpara>
						Als Erstes werden lokale &ucsUCR;-Variablen ausgewertet.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
						Die lokalen Variablen werden von Richtlinien-Variablen
						überstimmt, die aus dem Verzeichnisdienst bezogen werden.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
						Die Option <option>--schedule</option> dient zum Setzen lokaler
                        Variablen, die nur für einen gewissen Zeitraum gelten sollen. Diese
                        Ebene der &ucsUCR; ist reserviert für lokale Einstellungen, die
                        durch zeitgesteuerte Mechanismen in &ucsUCS; automatisiert
						vorgenommen werden.
						</simpara>
					</listitem>
					<listitem>
						<para>
						Durch Verwendung der Option <option>--force</option> beim Setzen einer
                        lokalen Variable werden aus den Verzeichnisdienst übernommene
                        Einstellung ebenso wie Variablen der Schedule-Ebene überstimmt und
                        statt dessen der angegebene Wert für das lokale System festgelegt. Beispiel:
						</para>
                        <programlisting language="sh">
univention-config-registry set --force mail/messagesizelimit=1000000
					</programlisting>
					</listitem>
                </itemizedlist>
            <para>
                Wird eine Variable gesetzt, die durch eine übergeordnete Richtlinie
                überschrieben wird, erscheint eine Warnmeldung.
            </para>
            <para>
                Die Verwendung der &ucsUCR;-Richtlinie ist in
                <xref linkend="ucr::templates::policy"/> dokumentiert.
            </para>
        </section><!--Einführung -->

        <section id="computers:Verwendung_des_Web-Interface_der_Univention_Management_Console"><title>Verwendung des Web-Interface in &ucsUMC;</title>
            <para>
                Über das Modul <guimenu>Univention Configuration Registry</guimenu> von
                &ucsUMC; können die Variablen eines Systems angezeigt und verändert
                werden, außerdem besteht die Möglichkeit über
                <guimenu>Hinzufügen</guimenu> neue Variablen zu setzen.
            </para>
            <para>
                Auf der Startseite wird eine Suchmaske angezeigt. Alle Variablen sind
                anhand einer <guimenu>Kategorie</guimenu> klassifiziert, etwa alle
                LDAP-bezogenen Einstellungen.
            </para>
            <para>
                In der Suchmaske kann als Filter das <guimenu>Suchattribut</guimenu>
                angegeben werden, das sich auf den Variablennamen, den Wert oder die
                Beschreibung beziehen kann.
            </para>
            <para>
                Nach erfolgter Suche werden die gefundenen Variablen in
                einer Tabelle angezeigt, dabei wird der Variablenname und der Wert
                angezeigt. Bewegt man den Mauszeiger auf den Variablennamen, wird eine weiterführende
				Beschreibung der Variable angezeigt.
            </para>
            <para>
                Mit einem Klick auf das Icon mit dem stilisierten Stift wird die
                Einstellung einer Variable bearbeitet. Das Icon mit dem stilisierten
                Minuszeichen erlaubt das Löschen einer Variable.
            </para>
			</section><!-- Verwendung des Web-Interface der Univention Management Console-->

        <section id="computers:Verwendung_des_Kommandozeilenfrontends"><title>Verwendung des Kommandozeilenfrontends</title>
			<para>
            Das Kommandozeileninterface von &ucsUCR; wird über den Befehl
            <command>univention-config-registry</command> aufgerufen. Alternativ kann
            auch die Kurzform <command>ucr</command> verwendet werden.
			</para>

            <section id="computers:Abfrage_einer_UCR-Variable"><title>Abfrage einer UCR-Variable</title>
                <para>
                    Eine einzelne &ucsUCR;-Variable kann mit dem Aufrufparameter
                    <option>get</option> ausgelesen werden:
                </para>
                    <programlisting language="sh">
univention-config-registry get ldap/server/ip
                    </programlisting>
                <para>
                    Mit dem Aufrufparameter <option>dump</option> können auch alle aktuell
                    gesetzten Variablen ausgegeben werden:
                </para>
                    <programlisting language="sh">
univention-config-registry dump
                    </programlisting>
            </section><!-- Abfrage einer UCR-Variable -->

            <section id="computers:Setzen_von_UCR-Variablen"><title>Setzen von UCR-Variablen</title>
                <para>
                    Mit dem Aufrufparameter <option>set</option> kann eine Variable gesetzt
                    werden. Der Name der Variable kann frei gewählt werden, darf aber
                    ausschließlich aus Buchstaben, Punkten, Zahlen, Binde- und
                    Schrägstrichen bestehen.
                </para>
                    <programlisting language="sh">
univention-config-registry set VARIABLENNAME=WERT
                    </programlisting>
                <para>
                    Ist die Variable schon vorhanden, wird der Inhalt aktualisiert.
                    Ansonsten wird ein neuer Eintrag angelegt.
                </para>
                <para>
                    Beim Setzen einer &ucsUCR;-Variable erfolgt keine Syntaxprüfung. Die
                    Änderung einer Variable bewirkt, dass alle Konfigurationsdateien, für
                    die diese Variable registriert ist, unmittelbar neu geschrieben
                    werden. Die betroffenen Dateien werden auf der Kommandozeile ausgegeben.
                </para>
                <para>
                    Dabei ist zu beachten, dass beim Setzen einer UCR-Variable zwar die
                    Konfiguration eines Dienstes aktualisiert wird, der entsprechende
                    Dienst aber nicht automatisch neu gestartet wird! Der Neustart muss manuell erfolgen.
                </para>
                <para>
                    Gleichzeitige Änderungen mehrerer Variablen in einer Befehlszeile sind
                    möglich. Wenn sich diese auf ein- und dieselbe Konfigurationsdatei
                    beziehen, wird diese nur einmal neu geschrieben:
                </para>
                    <programlisting language="sh">
univention-config-registry set \
    dns/forwarder1=192.0.2.2 \
    sshd/xforwarding="no" \
    sshd/port=2222
                    </programlisting>
                <para>
                    Auch ein bedingtes Setzen ist möglich. Soll z.B. ein
                    Wert nur dann in einer &ucsUCR;-Variable gespeichert
                    werden, wenn die Variable noch nicht vorhanden ist, kann dies durch
                    ein Fragezeichen statt des Gleichheitszeichens beim Zuweisen des
                    Wertes erreicht werden:
                </para>
                    <programlisting language="sh">
univention-config-registry set dns/forwarder1?192.0.2.2
                    </programlisting>
            </section><!-- Setzen von UCR-Variablen -->

            <section id="computers:Suche_nach_Variablen_und_gesetzten_Werten"><title>Suche nach Variablen und gesetzten Werten</title>
                <para>
                    Mit dem Parameter <parameter class="command">search</parameter> kann nach einer Variable gesucht
                    werden. Dieser Befehl sucht nach Variablennamen, welche die Zeichenkette
                    <wordasword>nscd</wordasword> enthalten und gibt diese mit den aktuellen Belegungen aus:
                </para>
                    <programlisting language="sh">
univention-config-registry search nscd
                    </programlisting>
                <para>
                    Es kann alternativ auch nach gesetzten Variablen-Werten gesucht
                    werden. Dieser Aufruf sucht nach allen Variablen, die auf
                    <literal>master.example.com</literal> gesetzt sind:
                </para>
                    <programlisting language="sh">
univention-config-registry search --value master.example.com
                    </programlisting>
                <para>
                    Bei der Suche können auch Suchmuster in Form von regulären Ausdrücken
                    verwendet werden. Das vollständige Format ist unter
					<ulink url="https://docs.python.org/2/library/re.html"/> dokumentiert.
                </para>
            </section><!-- Suche nach Variablen und gesetzten Werten -->

            <section id="computers:Loeschen_von_UCR-Variablen"><title>Löschen von UCR-Variablen</title>
                <para>
                    Mit dem Aufrufparameter <parameter class="command">unset</parameter> kann eine Variable entfernt werden.
                    Das folgende Beispiel löscht die Variable <envar>dns/forwarder2</envar>. Auch hier
                    können mehrere zu löschende Variablen übergeben werden:
                </para>
                    <programlisting language="sh">
univention-config-registry unset dns/forwarder2
                    </programlisting>
            </section><!-- Löschen von UCR-Variablen -->

            <section id="computers:Neuerzeugung_von_Konfigurationsdateien_aus_ihrem_Template"><title>Neuerzeugung von Konfigurationsdateien aus ihrem Template</title>
                <para>
                    Mit dem Aufrufparameter <parameter class="command">commit</parameter> wird eine Konfigurationsdatei
                    aus ihrem Template neu erzeugt. Der Name der Konfigurationsdatei ist
                    als Parameter anzugeben, z.B.:
                </para>
                    <programlisting language="sh">
univention-config-registry commit /etc/samba/smb.conf
                    </programlisting>
                <para>
                    Da UCR-Templates beim Editieren von UCR-Variablen in der Regel
                    automatisch neu erzeugt werden, wird dies vor allem für Tests verwendet.
                </para>
                <para>
                    Wird beim Aufruf von <command>ucr commit</command> kein Dateiname angegeben,
                    werden sämtliche durch &ucsUCR; verwalteten Dateien neu aus den
                    Vorlagen erzeugt. In der Regel sollte es allerdings nicht notwendig
                    sein, alle Konfigurationsdateien neu zu erzeugen.
                </para>
            </section><!-- Neuerzeugung von Konfigurationsdateien aus ihrem Template -->

            <section id="computers:Übernahme_von_Variablen_in_Shell-Skripte"><title>Übernahme von Variablen in Shell-Skripte</title>
                <para>
                    Über den Aufrufparameter <option>shell</option> werden &ucsUCR;-Variablen
                    und ihre aktuellen Belegungen in einem Format ausgegeben, das in
                    Shell-Skripten verwendet werden kann:
                </para>
                    <programlisting language="sh">
univention-config-registry shell ldap/server/name
                    </programlisting>
                <para>
                    Dabei werden verschiedene Konvertierungen vorgenommen: Schrägstriche
                    in Variablennamen werden durch Unterstriche ersetzt und in den Werten
                    enthaltene Zeichen, die in Shell-Skripten eine besondere Bedeutung
                    haben, werden durch Anführungszeichen geschützt.
                </para>
                <para>
                    Damit &ucsUCR;-Variablen als Umgebungsvariablen in einem
                    Shell-Skript eingelesen werden, muss die Ausgabe von &ucsUCR;
                    durch den Befehl <command>eval</command> ausgeführt werden:
                </para>
                    <programlisting language="sh">
# eval "$(univention-config-registry shell ldap/server/name)"
# echo "$ldap_server_name"
master.firma.de
                    </programlisting>
            </section><!-- Übernahme von Variablen in Shell-Skripte -->
        </section><!-- Verwendung des Kommandozeilenfrontends -->

        <section id="ucr::templates::policy"><title>Richtlinienbasierte Konfiguration von UCR-Variablen</title>
            <para>
                Ein Teil der über &ucsUCR; konfigurierten Einstellungen sind
                systemspezifisch (z.B. der Rechnername), viele Eigenschaften können
                jedoch auch auf mehrere Rechner angewendet werden. Mithilfe der
                im <guimenu>Richtlinien</guimenu>-Modul von &ucsUMC; verwalteten
                <guimenu>Univention Configuration Registry</guimenu>-Richtlinie können
                Variablen zusammengefasst und auf mehr als einen Rechner angewendet
                werden.
            </para>
                <figure id="policy-mailsize"><title>Konfiguration der maximalen Mailgröße über eine Richtlinie</title>
                    <graphic scalefit="1" width="100%" fileref="illustrations44/computers_policy_mailsize_de.png"/>
                </figure>
            <para>
                Zuerst muss für die anzulegende Richtlinie ein <guimenu>Name</guimenu>
                gesetzt werden, unter dem die Variablen später einzelnen
                Rechner-Objekten zugewiesen werden können.
            </para>
            <para>
                Außerdem muss mindestens eine <guimenu>Variable</guimenu> konfiguriert
                und ein <guimenu>Wert</guimenu> zugewiesen werden.
            </para>
            <para>
                Diese Richtlinie kann dann einem Rechner-Objekt oder einem
                Container/OU zugewiesen werden (siehe
                <xref linkend="central:policies:assign"/>). Es ist zu
                beachten, dass die Auswertung der konfigurierten Werte gegenüber den übrigen
                Richtlinien abweicht: Die Werte werden nicht direkt auf die Rechner übertragen,
                sondern durch Univention Directory Policy auf den zugewiesenen Rechner
                geschrieben. Das dabei verwendete Zeitintervall wird durch die
                &ucsUCRV; <envar>ldap/policy/cron</envar> konfiguriert und erfolgt standardmäßig stündlich.
            </para>
        </section><!-- Richtlinienbasierte Konfiguration von UCR-Variablen -->

        <section id="ucr::templates::extend"><title>Anpassung von UCR-Templates</title>
            <para>
                Ein &ucsUCR;-Template ist im im einfachsten Fall eine Kopie der ursprünglichen
                Konfigurationsdatei, in der die Stellen, an denen der Wert einer Variable
                verwendet werden soll, eine Referenz auf den Variablennamen enthalten.
            </para>
            <para>
                Für komplexere Szenarien kann auch Inline-Python-Code integriert
                werden, der dann auch komplexere Konstrukte wie etwa bedingte Abfragen erlaubt.
            </para>
			<note>
				<para>
                    &ucsUCR;-Templates sind in den entsprechenden UCS-Software-Paketen
                    als Konfigurationsdateien enthalten. Bei der Aktualisierung von
                    Paketen wird überprüft, ob Änderungen an Konfigurationsdateien
                    vorgenommen wurden. Wenn Konfigurationsdateien nicht mehr im
                    Auslieferungszustand vorliegen, werden diese nicht
                    überschrieben. Stattdessen wird eine neue Version im selben
                    Verzeichnis mit der Endung <filename class="extension">.debian.dpkg-new</filename> abgelegt. Sollen
                    Änderungen an &ucsUCR;-Templates vorgenommen werden, werden diese
                    Templates bei der Aktualisierung ebenfalls nicht überschrieben und im
                    selben Verzeichnis mit der Endung <filename class="extension">.dpkg-new</filename> oder
                    <filename class="extension">.dpkg-dist</filename> abgelegt. Entsprechenden Hinweise werden in die
                    Log-Datei <filename>/var/log/univention/updater.log</filename> geschrieben.
                    Dies tritt nur auf, wenn UCR-Templates lokal angepasst werden.
				</para>
			</note>
            <para>
                Die UCR-Templates werden im Verzeichnis
				<filename class="directory">/etc/univention/templates/files/</filename> abgelegt. Der Pfad zu den
                Vorlagen entspricht dem absoluten Pfad zu der Konfigurationsdatei mit
                vorangestelltem Pfad zum Vorlagenverzeichnis. So findet sich zum Beispiel
                die Vorlage für die Konfigurationsdatei <filename>/etc/issue</filename> unter
                <filename>/etc/univention/templates/files/etc/issue</filename>.
            </para>
            <para>
                Damit Konfigurationsdateien von &ucsUCR; korrekt verarbeitet werden
                können, müssen sie im UNIX-Format vorliegen. Werden
                Konfigurationsdateien z.B. unter DOS oder Windows bearbeitet, werden
                Steuerzeichen zur Kennzeichnung des Zeilenumbruchs eingefügt, die die
                Verwendung der Datei durch &ucsUCR; stören.
            </para>

            <section id="ucr::templates::extend::simple"><title>Referenzierung von UCR-Variablen in Templates</title>
                <para>
                    Im einfachsten Fall kann eine UCR-Variable im Template direkt
                    referenziert werden. Als Platzhalter dient der Variablenname, der von der
                    Zeichenkette <literal>@%@</literal> eingefasst wird. Als Beispiel die Option für
                    die Aktivierung von X11-Forwarding in der Konfigurationsdatei
                    <filename>/etc/ssh/sshd_config</filename> des OpenSSH-Servers:
                </para>
                    <programlisting>
X11Forwarding @%@sshd/xforwarding@%@
                    </programlisting>
                <para>
                    Neu eingefügte Referenzen auf UCR-Variablen werden automatisch von Templates
                    ausgewertet, eine zusätzliche Registrierung ist nur bei der Verwendung von
                    Inline-Python-Code nötig (siehe <xref linkend="ucr::templates::extend::python"/>).
                </para>
            </section><!-- Referenzierung von UCR-Variablen in Templates -->

            <section id="ucr::templates::extend::python"><title>Integration von Inline-Python-Code in Templates</title>
                <para>
                    In UCR-Templates kann beliebiger Python-Code eingebettet werden, in
                    dem ein von der Zeichenkette <literal>@!@</literal> eingefasster Codeblock
                    eingefügt wird. Mit solchen Blöcken können z.B. bedingte Abfragen
                    umgesetzt werden, so dass beim Ändern eines Parameters über eine
                    Variable weitere abhängige Einstellungen automatisch in die
                    Konfigurationsdatei aufgenommen werden. Folgende Code-Sequenz
                    konfiguriert beispielsweise Netzwerk-Einstellungen anhand der
                    &ucsUCR;-Einstellungen:
                </para>
                    <programlisting>
@!@
if configRegistry.get('apache2/ssl/certificate'):
    print 'SSLCertificateFile %s' % \
        configRegistry['apache2/ssl/certificate']
@!@
                    </programlisting>
                <para>
                    Alle mit der print-Funktion ausgegebenen Daten werden dabei in die
                    generierte Konfigurationsdatei geschrieben. Die in &ucsUCR;
                    gespeicherten Daten können über das <classname>ConfigRegistry</classname>-Objekt abgefragt
                    werden, z.B.:
                </para>
                    <programlisting>
@!@
if configRegistry.get('version/version') and \
        configRegistry.get('version/patchlevel'):
    print 'UCS %(version/version)s-%(version/patchlevel)s' % \
        configRegistry
@!@
                    </programlisting>
                <para>
                    Im Gegensatz zu direkt referenzierten UCR-Variablen (siehe
                    <xref linkend="ucr::templates::extend::simple"/>) müssen Variablen, auf die in
                    Inline-Python-Code zugegriffen wird, explizit registriert werden.
                </para>
                <para>
                    Die in Konfigurationsdateien verwendeten &ucsUCR;-Variablen werden
                    unterhalb des Verzeichnisses
					<filename class="directory">/etc/univention/templates/info/</filename> in <emphasis>info</emphasis>-Dateien
                    registriert, die in der Regel nach dem Paketnamen mit der
                    Dateiendung <filename class="extension">.info</filename> benannt werden. Wird neuer Python-Code in die Vorlagen eingefügt oder bestehender Code
                    so verändert, dass er zusätzliche oder andere Variablen nutzt, so muss
                    einer der bestehenden <filename class="extension">.info</filename>-Dateien modifiziert oder eine neue
                    hinzugefügt werden.
                </para>
                <para>
                    Nach der Änderung von <filename class="extension">.info</filename>-Dateien muss der Befehl
                    <command>ucr update</command> aufgerufen werden.
                </para>
            </section>
        </section>
    </section>

    <section id="computers:Basis-Systemdienste"><title>Basis-Systemdienste</title>
        <para>
            Dieser Abschnitt beschreibt grundlegende System-Dienste einer
            UCS-Installation, wie etwa die Konfiguration der
            Authentifizierungs-Schnittstelle PAM, des System-Loggings und des NSCD.
        </para>

        <section id="computers:rootaccount"><title>Administrativer Zugriff mit dem Root-Konto</title>
            <para>
                Für den administrativen Vollzugriff existiert auf jedem UCS-System
                das <systemitem class="username">root</systemitem>-Konto. Das Passwort wird beim Installieren des Systems
                festgelegt. Der root-Benutzer wird nicht im LDAP-Verzeichnis
                gespeichert, sondern in den lokalen Benutzerkonten.
            </para>
            <para>
				Das Passwort für den lokalen root-Nutzer kann über die Kommandozeile
				mit den Befehl <command>passwd</command> geändert werden.
                Es ist zu beachten, dass hierbei keine Prüfungen hinsichtlich der
                Passwortlänge/-Stärke und bereits verwendeter Passwörter durchgeführt
                wird.
            </para>
        </section><!-- Administrativer Zugriff mit dem Root-Konto -->

        <section id="computers:Konfiguration_der_Sprach-_und_Tastatur-Einstellungen"><title>Konfiguration der Sprach- und Tastatur-Einstellungen</title>
            <para>
                Unter Linux werden Lokalisierungseigenschaften für Software in <emphasis>Locales</emphasis>
                definiert. Konfiguriert werden u.a. Einstellungen wie Datums- sowie zu
                nutzende Währungsformate, verwendete Zeichensätze und die
				Sprachauswahl für internationalisierte Programme.
				Die installierten Locales können in &ucsUMC; unter
                <guimenu>Sprach-Einstellungen &ar; Verfügbare
                Systemsprachen</guimenu> geändert werden. Unter
                <guimenu>Standard-System-Sprachdefinition</guimenu> wird die Standard-Locale
                festgelegt.
            </para>
                <figure id="language-settings"><title>Konfiguration der Spracheinstellungen</title>
                    <graphic scalefit="1" width="100%" fileref="illustrations44/computers_timezone_de.png"/>
                </figure>
            <para>
                Das <guimenu>Tastaturlayout</guimenu> im Menüpunkt
                <guimenu>Zeitzonen- und Tastatureinstellungen</guimenu> greift bei lokalen
                Anmeldungen an dem Rechner.
            </para>
        </section><!-- Konfiguration der Sprach- und Tastatur-Einstellungen -->

        <section id="computers:systemservices"><title>Starten/Stoppen von Systemdiensten / Konfiguration des automatischen Starts</title>
            <para>
                Mit dem UMC-Modul <guimenu>Systemdienste</guimenu> kann der aktuelle
                Status eines Systemdienstes geprüft und dieser ggf. gestartet oder
                gestoppt werden.
            </para>
                <figure id="umc-services"><title>Übersicht der Systemdienste</title>
                    <graphic scalefit="1" width="90%" align="center" fileref="illustrations44/umc-systemservices.png"/>
                </figure>
            <para>
                In der Liste aller auf dem System installierten Dienste ist unter
                <guimenu>Status</guimenu> der aktuelle Laufzeitstatus und eine
                <guimenu>Beschreibung</guimenu> aufgeführt. Unter <guimenu>mehr</guimenu> kann
                der Dienst gestartet, gestoppt oder neu gestartet werden.
            </para>
            <para>
                In der Grundeinstellung wird jeder Dienst automatisch beim Systemstart
                gestartet. In einigen Fällen kann es sinnvoll sein, den Dienst nicht
                direkt zu starten, sondern z.B. erst nach Konfiguration weiterer
                Einstellungen. Mit der Aktion <guimenu>Manuell starten</guimenu> wird der
                Dienst nicht beim Systemstart automatisch gestartet, kann aber
                nachträglich gestartet werden. Mit der Aktion <guimenu>Niemals
                starten</guimenu> wird auch der nachträgliche Start unterbunden.
            </para>
        </section><!-- Starten/Stoppen von Systemdiensten / Konfiguration des automatischen Starts -->

        <section id="computers:Authentifizierung__PAM"><title>Authentifizierung / PAM</title>
            <para>
                Authentifizierungs-Dienste werden in Univention Corporate Server durch
                <emphasis>Pluggable Authentication Modules</emphasis> (PAM) realisiert. Dabei werden
                unterschiedliche Anmeldeverfahren auf eine gemeinsame Schnittstelle
                abgebildet, so dass eine neue Anmeldemethode keine Anpassungen an
                bestehenden Applikationen benötigt.
            </para>

            <section id="computers:Anmeldebeschraenkungen_fuer_ausgewaehlte_Benutzer"><title>Anmeldebeschränkungen für ausgewählte Benutzer</title>
                <para>
                    In der Grundeinstellung können sich nur der <systemitem class="username">root</systemitem>-Benutzer und Mitglieder der
                    Gruppe <systemitem class="groupname">Domain Admins</systemitem> remote über SSH und lokal auf einem
					<systemitem class="service">tty</systemitem> anmelden.
                </para>
                <para>
                    Diese Einschränkung kann mit der &ucsUCRV; <envar>auth/DIENST/restrict</envar>
                    konfiguriert werden. Der Zugriff auf diesen Dienst kann durch Setzen
                    der Variablen <envar>auth/DIENST/user/BENUTZERNAME</envar> und
                    <envar>auth/DIENST/group/GRUPPENNAME</envar> auf <literal>yes</literal> freigegeben
                    werden.
                </para>
                <para>
					Anmeldebeschränkungen werden unterstützt für
					<systemitem class="service">SSH</systemitem> (<literal>sshd</literal>),
					<systemitem class="service">FTP</systemitem> (<literal>ftp</literal>),
					die Anmeldung am Login-Manager <systemitem class="service">KDM</systemitem> (<literal>kdm</literal>),
					Anmeldung an einem <systemitem class="service">tty</systemitem> (<literal>login</literal>),
					<systemitem class="service">rlogin</systemitem> (<literal>rlogin</literal>),
					<systemitem class="service">PPP</systemitem> (<literal>ppp</literal>)
					und andere Dienste (<literal>other</literal>).
					Ein Beispiel für <systemitem class="service">SSH</systemitem>:
                </para>
                    <programlisting>
auth/sshd/group/Administrators: yes
auth/sshd/group/Computers: yes
auth/sshd/group/DC Backup Hosts: yes
auth/sshd/group/DC Slave Hosts: yes
auth/sshd/group/Domain Admins: yes
auth/sshd/restrict: yes
                    </programlisting>
            </section>
        </section>

        <section id="computers:configureldapserver">
		  <title>Konfiguration des verwendeten LDAP-Servers</title>
		  <para>
			In einer UCS-Domäne können mehrere LDAP-Server betrieben werden. Der primär verwendete
			wird mit der &ucsUCRV; <envar>ldap/server/name</envar> festgelegt, weitere Server können
			über die &ucsUCRV; <envar>ldap/server/addition</envar> angegeben werden.
		  </para>

		  <para>
			Alternativ können die LDAP-Server auch über die Richtlinie
			<guimenu>LDAP-Server</guimenu> in der UMC-Rechnerverwaltung festgelegt
			werden. Die Reihenfolge der Server bestimmt die Reihenfolge der Anfragen des Rechners an
			die Server, falls ein LDAP-Server nicht erreichbar sein sollte.
		  </para>

		  <para>
			In der Grundeinstellung ist nach Installation/Domänenbeitritt nur
			<envar>ldap/server/name</envar> gesetzt. Ist mehr als ein LDAP-Server vorhanden, ist es
			empfehlenswert zur Verbesserung der Ausfallsicherung min. zwei LDAP-Server über die
			<guimenu>LDAP-Server</guimenu>-Richtlinie zuzuweisen. Bei einer auf mehrere Standorte
			verteilten Umgebung sollte darauf geachtet werden möglichst LDAP-Server aus dem lokalen
			Netz vorzugeben.
		  </para>

        </section>

        <section id="computers:configureprintserver"><title>Konfiguration des verwendeten Druckservers</title>
            <para>
                Der zu verwendende Druckserver kann mit der &ucsUCRV; <envar>cups/server</envar>
                festgelegt werden.
            </para>
            <para>
                Alternativ kann der Server auch über die Richtlinie
                <guimenu>Druckserver</guimenu> in der UMC-Rechnerverwaltung festgelegt werden.
            </para>
        </section><!-- Konfiguration des verwendeten Druckservers -->

        <section id="computers:Protokollierung_Abfrage_von_Systemmeldungen_und_zustaenden"><title>Protokollierung/Abfrage von Systemmeldungen und -zuständen</title>
            <section id="computers:Logdateien"><title>Logdateien</title>
                <para>
                    Alle UCS-spezifischen Logdateien (z.B. für die Listener/Notifier-Replikation)
					werden im Verzeichnis <filename class="directory">/var/log/univention/</filename> abgelegt. Serverdienste
                    protokollieren in ihre jeweilige Standard-Logdateien; Apache beispielsweise in
                    die Datei <filename>/var/log/apache2/error.log</filename>.
                </para>
                <para>
					Die Logdateien werden durch <application>logrotate</application> verwaltet. Es sorgt dafür, dass
                    Logdateien in einem Intervall (konfigurierbar in Wochen über
                    die &ucsUCRV; <envar>log/rotate/weeks</envar>, standardmäßig 12) fortlaufend benannt werden
                    und ältere Logdateien anschließend gelöscht werden. Die aktuelle Logdatei für
                    den Univention Directory Listener findet sich beispielsweise in der
                    Datei <filename>listener.log</filename>, die der Vorwoche in <filename>listener.log.1</filename> usw.
                </para>
                <para>
                    Alternativ können Logdateien auch erst beim Erreichen einer bestimmten Größe rotiert
                    werden. Soll beispielsweise erst ab einer Größe von 50 MB rotiert werden, kann dazu
                    die &ucsUCRV; <envar>logrotate/rotates</envar> auf <literal>size 50M</literal>
                    gesetzt werden.
                </para>
                <para>
                    Über die &ucsUCRV; <envar>logrotate/compress</envar> kann konfiguriert werden, ob
                    die älteren Logdateien zusätzlich mit <command>gzip</command> komprimiert werden sollen.
                </para>
            </section><!-- Logdateien -->

            <section id="computers:Protokollierung_des_Systemzustands"><title>Protokollierung des Systemzustands</title>
                <para>
                    Mit <command>univention-system-stats</command> kann der
                    aktuelle Systemzustand in die Datei <filename>/var/log/univention/system-stats.log</filename>
                    protokolliert werden. Protokolliert werden dabei folgende Werte:
                </para>
                    <itemizedlist>
						<listitem><simpara>Der freie Speicherplatz auf den Systempartitionen (<command>df -lhT</command>)</simpara></listitem>
						<listitem><simpara>Die aktuelle Prozessliste (<command>ps auxf</command>)</simpara></listitem>
						<listitem><simpara>Zwei <command>top</command>-Aufstellungen der aktuellen Prozesse und Auslastung (<command>top -b -n2</command>)</simpara></listitem>
						<listitem><simpara>Den aktuell freien Arbeitsspeicher (<command>free</command>)</simpara></listitem>
						<listitem><simpara>Die Zeit, die seit dem Start des Systems vergangen ist (<command>uptime</command>)</simpara></listitem>
						<listitem><simpara>Temperatur-, Lüfter- und Spannungskennzahlen aus <application>lm-sensors</application> (<command>sensors</command>)</simpara></listitem>
						<listitem><simpara>Eine Aufstellung der aktuellen Samba-Verbindungen (<command>smbstatus</command>)</simpara></listitem>
                    </itemizedlist>
                <para>
                    Die Laufzeiten in denen der Systemzustand protokolliert werden soll, können
                    durch die &ucsUCRV; <envar>system/stats/cron</envar> in Cron-Syntax definiert werden,
                    z.B. <literal>0,30 * * * *</literal> für eine Protokollierung jeweils zu jeder vollen und
                    halben Stunde. Die Protokollierung wird durch Setzen
                    der &ucsUCRV; <envar>system/stats</envar> auf <literal>yes</literal> aktiviert und ist bei
                    Neuinstallationen ab UCS 3.0 die Grundeinstellung.
                </para>
            </section><!-- Protokollierung des Systemzustands -->

            <section id="computers:Anzeige_von_Systemstatistiken_in_der_UMC"><title>Anzeige von Systemstatistiken in &ucsUMC;</title>
                <para>
                    Das UMC-Modul <guimenu>Statistiken</guimenu> zeigt die Auslastung des
                    Systems an. Dabei wird jeweils eine Grafik für die unterschiedlichen
                    Zeiträume angezeigt:
                </para>
                    <itemizedlist>
					<listitem><simpara>Die letzten 24 Stunden</simpara></listitem>
					<listitem><simpara>Die vergangene Woche</simpara></listitem>
					<listitem><simpara>Der vergangene Monat</simpara></listitem>
					<listitem><simpara>Das vergangene Jahr</simpara></listitem>
                    </itemizedlist>
                <para>
                    Folgende Systeminformationen werden protokolliert:
                </para>
                    <itemizedlist>
					<listitem><simpara>Die Auslastung des Hauptspeichers in Prozent</simpara></listitem>
					<listitem><simpara>Die Prozessor-Auslastung des Systems</simpara></listitem>
					<listitem><simpara>Die Anzahl der jeweils aktiven Terminalserver-Sitzungen</simpara></listitem>
					<listitem><simpara>Die Auslastung der Auslagerungsdatei (Swap)</simpara></listitem>
                    </itemizedlist>
            </section><!-- Anzeige von Systemstatistiken in &ucsUMC; -->

            <section id="computers:modules:top"><title>Prozessübersicht in &ucsUMC;</title>
                <para>
                    Das UMC-Modul <guimenu>Prozessübersicht</guimenu> zeigt eine Tabelle der aktuellen
                    Prozesse auf dem System an. Die Prozesse können nach den folgenden
                    Eigenschaften sortiert werden, in dem auf den entsprechenden
                    Tabellenkopf geklickt wird:
                </para>
                    <itemizedlist>
					<listitem><simpara>Die CPU-Nutzung in Prozent</simpara></listitem>
					<listitem><simpara>Der Benutzername, unter dem der Prozess läuft</simpara></listitem>
					<listitem><simpara>Speicherverbrauch in Prozent</simpara></listitem>
					<listitem><simpara>Die Prozess-ID</simpara></listitem>
                    </itemizedlist>
                <para>
                    Unter dem Menüpunkt <guimenu>mehr</guimenu> können Prozesse beendet werden. Hierbei werden zwei Arten der Terminierung
                    unterschieden:
                </para>
                    <itemizedlist>
						<listitem>
							<simpara>
							Die Aktion <guimenu>Beenden</guimenu> schickt dem Prozess eine
							Benachrichtigung vom Typ <systemitem class="event">SIGTERM</systemitem>, dies ist der Regelfall bei der
							kontrollierten Beendigung von Programmen.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
							In Einzelfällen kann es vorkommen, dass sich ein Programm
                            - z.B. nach einem Absturz - nicht
                            mehr über dieses Verfahren beenden lässt. In diesem Fall kann mit der Aktion
							<guimenu>Beenden erzwingen</guimenu> das Signal <systemitem class="event">SIGKILL</systemitem> geschickt werden
							um den Prozess forciert zu beenden.
							</simpara>
						</listitem>
                    </itemizedlist>
                <para>
					Das Beenden über <systemitem class="event">SIGTERM</systemitem> ist in der Regel vorzuziehen, da viele
                    Programme dann einen kontrollierten Programmabbruch einleiten und
                    z.B. ein Speichern von Dateien o.ä. durchführen.
                </para>
            </section><!-- Prozessübersicht in &ucsUMC; -->

            <section id="computers:modules:diagnostic"><title>System-Fehlerdiagnose in &ucsUMC;</title>
                <para>
					Um ein UCS-System auf verschiedene bekannte Probleme hin zu analysieren
					bietet das UMC-Modul <guimenu>System-Fehlerdiagnose</guimenu> eine
					entsprechende Benutzerschnittstelle.
				</para>
				<para>
					Das Modul wertet eine Reihe ihm bekannter Problemszenarien aus und bietet
					Lösungsvorschläge an, wenn es in der Lage ist gefundene Probleme automatisch
					zu beheben. Diese Funktion wird durch zusätzliche Schaltflächen dargestellt.
					Darüber hinaus werden Links zu weiterführenden Artikeln und zu
					entsprechenden UMC-Modulen angezeigt.
				</para>
            </section>
        </section><!-- Protokollierung/Abfrage von Systemmeldungen und -zuständen -->

        <section id="computers:Ausfuehren_von_wiederkehrenden_Aktionen_mit_Cron"><title>Ausführen von wiederkehrenden Aktionen mit Cron</title>
            <para>
                Regelmäßig wiederkehrende Aktionen (wie z.B. das Verarbeiten von Logdateien)
                können mit dem Cron-Dienst zu einem definierten Zeitpunkt gestartet
                werden. Eine solche Aktion bezeichnet man auch als Cron-Job.
            </para>

            <section id="computers:Stündliches_tägliches_wöchentliches_monatliches_Ausführen_von_Skripten"><title>Stündliches/tägliches/wöchentliches/monatliches Ausführen von Skripten</title>
                <para>
                    Auf jedem UCS-System sind vier Verzeichnisse
                    vordefiniert, <filename class="directory">/etc/cron.hourly/</filename>, <filename class="directory">/etc/cron.daily/</filename>, <filename class="directory">/etc/cron.weekly/</filename>
                    und <filename class="directory">/etc/cron.monthly/</filename>. Shell-Skripte, die in diesen Verzeichnissen
                    abgelegt werden und als ausführbar markiert sind, werden automatisch
                    stündlich, täglich, wöchentlich oder monatlich ausgeführt.
                </para>
            </section>

            <section id="cron:local"><title>Definition eigener Cron-Jobs in <filename class="directory">/etc/cron.d/</filename></title>
                <para>
                    Ein Cron-Job wird in einer Zeile definiert, die aus insgesamt sieben Spalten aufgebaut ist:
                </para>
                    <itemizedlist>
					<listitem><simpara>Minute (0-59)</simpara></listitem>
					<listitem><simpara>Stunde (0-23)</simpara></listitem>
					<listitem><simpara>Tag (1-31)</simpara></listitem>
					<listitem><simpara>Monat (1-12)</simpara></listitem>
					<listitem><simpara>Wochentag (0-7) (0 und 7 stehen dabei für den Sonntag)</simpara></listitem>
					<listitem><simpara>Name des ausführenden Benutzers (z.B. root)</simpara></listitem>
					<listitem><simpara>Der auszuführende Befehl</simpara></listitem>
                    </itemizedlist>
                <para>
                    Die Zeitangaben können dabei in verschiedenen Formaten vorgenommen werden. Es
                    kann entweder eine konkrete Minute/Stunde/etc. vorgegeben werden oder mit
                    einem * eine Aktion zu jeder Minute/Stunde/etc. ausgeführt werden. Es können
                    auch Intervalle definiert werden, */2 führt als Minutenangabe beispielsweise dazu, dass
                    eine Aktion jede zweite Minute ausgeführt wird.
                </para>
                <para>
                    Einige Beispiele:
                </para>
                    <programlisting>
30 * * * * root /usr/sbin/jitter 600 /usr/share/univention-samba/slave-sync
*/5 * * * * www-data /usr/bin/php -q /usr/share/horde/reminders.php
                    </programlisting>
            </section>

            <section id="computers:Definition_eigener_Cron-Jobs_in_Univention_Configuration_Registry"><title>Definition eigener Cron-Jobs in Univention Configuration Registry</title>
                <para>
                    Cron-Jobs können auch in &ucsUCR; definiert werden. Das ist besonders
                    nützlich, wenn sie über eine &ucsUDM;-Richtlinie gesetzt und somit auf mehr als einen Rechner angewendet werden.
                </para>
                <para>
                    Jeder Cron-Job setzt sich dabei aus min. zwei &ucsUCR;-Variablen
					zusammen. <replaceable>JOBNAME</replaceable> ist dabei ein allgemeiner Bezeichner.
                </para>
                    <itemizedlist>
						<listitem>
							<simpara>
							<command>cron/JOBNAME/command</command> legt den auszuführenden
							Befehl fest (Angabe erforderlich)
							</simpara>
						</listitem>
						<listitem>
							<simpara>
							<command>cron/JOBNAME/time</command> setzt die Ausführungszeit
							fest (siehe <xref linkend="cron:local"/>) (Angabe erforderlich)
							</simpara>
						</listitem>
						<listitem>
							<simpara>
							Standardmäßig wird der Cron-Job als Benutzer <systemitem class="username">root</systemitem> ausgeführt. Mit
                            <command>cron/JOBNAME/user</command> kann ein abweichender Benutzer
							angegeben werden.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
							Wird unter <command>cron/JOBNAME/mailto</command> eine
							Email-Adresse hinterlegt, wird die Ausgabe des Cron-Jobs per Email dorthin gesendet.
							</simpara>
						</listitem>
						<listitem>
							<simpara>
							Mit <command>cron/JOBNAME/description</command> kann eine
							Beschreibung hinterlegt werden.
							</simpara>
						</listitem>
                    </itemizedlist>
            </section>
        </section>

        <section id="computers:nscd"><title>Name Service Cache Daemon</title>
            <para>
                Um häufige Anfragen unveränderter Daten zu beschleunigen, werden Namensauflösungen
                durch den <emphasis>Name Service Cache Daemon</emphasis> (NSCD) zwischengespeichert. Werden diese erneut angefragt, muss so nicht eine
                vollständige neue LDAP-Anfrage durchgeführt werden, sondern die Daten können
                direkt aus dem Cache bezogen werden.
            </para>

			<para>
			  Die Zwischenspeicherung der Gruppen erfolgt seit UCS 3.1
			  aus Performance- und Stabilitätsgründen nicht mehr über
			  den NSCD, sondern durch einen lokalen Gruppencache,
			  siehe <xref linkend="groups::cache"/>.
			</para>

            <para>
                Die zentrale Konfigurations-Datei des NSCD (<filename>/etc/nscd.conf</filename>) wird
                durch &ucsUCR; verwaltet.
            </para>
            <para>
                Der Zugriff auf den Cache erfolgt über eine Hash-Tabelle. Die Größe dieser
                Hash-Tabelle kann über &ucsUCR; konfiguriert werden und sollte größer sein als
                die Anzahl der gleichzeitig verwendeten Benutzer/Rechner. Aus technischen Gründen
                sollte als Größe der Tabelle eine Primzahl verwendet werden. Die folgende Tabelle
                führt die Standardwerte der Variablen auf:
            </para>
                <table>
                    <title>Standardgrößen der NSCD Hash-Tabellen</title>
                    <tgroup cols="2">
                        <colspec colnum="1" colname="col1" colwidth="1*"/>
                        <colspec colnum="2" colname="col2" colwidth="2*"/>
                        <thead>
                            <row>
                                <entry>Variable</entry>
                                <entry>Standardgröße der Hash-Tabelle</entry>
                            </row>
                        </thead>
                        <tbody>
                            <row>
                                <entry><command>nscd/hosts/size</command></entry>
                                <entry>6007</entry>
                            </row>
                            <row>
                                <entry><command>nscd/passwd/size</command></entry>
                                <entry>6007</entry>
                            </row>
                        </tbody>
                    </tgroup>
                </table>
            <para>
                Bei sehr großen Caches kann es nötig sein, die Größe der Cache-Datenbank im
                Arbeitsspeicher zu erhöhen. Dies kann mit den &ucsUCR;-Variablen
                <envar>nscd/hosts/maxdbsize</envar> und
                <envar>nscd/passwd/maxdbsize</envar> konfiguriert werden.
            </para>
            <para>
                Standardmäßig startet NSCD fünf Threads. In Umgebungen, in denen
                viele Zugriffe erfolgen, kann es erforderlich sein, die Anzahl durch
                die &ucsUCRV; <envar>nscd/threads</envar> zu erhöhen.
            </para>
            <para>
                In der Grundeinstellung wird ein aufgelöster Gruppen- oder Rechnername eine
                Stunde im Cache vorgehalten und ein Benutzername zehn Minuten. Durch die
                &ucsUCR;-Variablen
                <envar>nscd/hosts/positive_time_to_live</envar> und
                <envar>nscd/passwd/positive_time_to_live</envar> können diese
                Zeiträume erweitert oder verringert werden (die Angabe erfolgt in Sekunden).
            </para>
            <para>
                Gelegentlich kann es nötig sein, den Cache des NSCD manuell zu
                invalidieren. Die kann individuell pro Cache-Tabelle durch folgende Befehle
                geschehen:
            </para>
                <programlisting language="sh">
nscd -i passwd
nscd -i hosts
                </programlisting>
            <para>
                Der Detailgrad der Logmeldungen kann mit der &ucsUCRV; <envar>nscd/debug/level</envar>
                konfiguriert werden.
            </para>
        </section><!-- Name Service Cache Daemon -->


        <section id="computers:xrdp">
            <title>RDP Anmeldung mit XRDP</title>
            <para>
                XRDP ist ein auf &ucsUCS; laufender Dienst, der es Benutzern erlaubt, eine X
                Sitzung über das <ulink
                url="https://de.wikipedia.org/wiki/Remote_Desktop_Protocol">Remote Desktop
                Protocol (RDP)</ulink> aufzubauen. Das Protokoll wird von Microsoft Windows und
                vielen anderen Betriebssystemen nativ unterstützt und benötigt damit keine
                Installation von zusätzlicher Software auf Client PCs.
            </para>

            <section id="computers:xrdp:installation">
                <title>Installation</title>
                <para>
                    XRDP ist über das App Center (siehe <xref linkend="software:appcenter"/>)
                    verfügbar und kann über das entsprechende &ucsUMC; Modul App Center installiert
                    werden, auch auf mehreren Systemen. Nach der Installation
                    läuft ein <ulink url="http://www.xrdp.org/">XRDP Server</ulink>.
                </para>
            </section>

            <section id="computers:xrdp:configuration">
                <title>Konfiguration</title>

                <section id="computers:xrdp:allowed_users">
                    <title>Erlaubte Benutzer</title>

                    <para>
                        Standardmäßig dürfen sich alle Benutzer der UNIX Gruppe <systemitem
                        class="groupname">Domain Admins</systemitem> über RDP verbinden. Der Name der
                        Gruppe kann über die &ucsUCRV; <envar>xrdp/access/admins</envar> geändert
                        werden.
                    </para>
                </section>

                <section id="computers:xrdp:concurrent_sessions">
                    <title>Maximale Anzahl gleichzeitiger Sitzungen</title>

                    <para>
                        Die maximale Anzahl gleichzeitiger RDP Sitzungen ist standardmäßig auf
                        <literal>10</literal> beschränkt und kann mit der &ucsUCRV;
                        <envar>xrdp/sessions/max</envar> geändert werden.
                    </para>
                </section>

                <section id="computers:xrdp:login_customization">
                    <title>Anpassung Anmeldefenster</title>

                    <para>
                        Der Titel und die Bilder im Anmeldefenster können über die &ucsUCRV;
                        <envar>xrdp/title</envar> und <envar>xrdp/imagedir</envar> angepasst werden.
                        Das Verzeichnis muss vier Bilddateien im Windows Bitmap Format enthalten. Die
                        ersten beiden werden als rechteckiges Logo an der linken Seite des
                        Eingabefeldes verwendet und die anderen beiden Dateien werden für das Banner
                        genutzt, dass unter dem Eingabefenster angezeigt wird.
                    </para>
                    <variablelist>
                      <varlistentry>
                        <term><filename>ad24b.bmp</filename></term>
                        <listitem>
                          <simpara>24 bit farbiges Logo, 140 x 140</simpara>
                        </listitem>
                      </varlistentry>
                      <varlistentry>
                        <term><filename>ad256.bmp</filename></term>
                        <listitem>
                          <simpara>256 farbiges Logo, 140 x 140</simpara>
                        </listitem>
                      </varlistentry>
                      <varlistentry>
                        <term><filename>xrdp24b.bmp</filename></term>
                        <listitem>
                          <simpara>24 bit farbiges Banner, 256 x 192</simpara>
                        </listitem>
                      </varlistentry>
                      <varlistentry>
                        <term><filename>xrdp256.bmp</filename></term>
                        <listitem>
                          <simpara>256 farbiges Banner, 256 x 192</simpara>
                        </listitem>
                      </varlistentry>
                    </variablelist>
                </section>
            </section>

            <section id="computers:xrdp:client_software">
                <title>Client Software</title>

                <itemizedlist>
                    <listitem>
                      <simpara>
                        Microsoft Windows verfügt über einen eingebauten RDP Client. Er zeigt eine
                        Zertifikatswarnung, solange das UCS Zertifikat nicht importiert worden ist.
                      </simpara>
                    </listitem>
                    <listitem>
                      <simpara>
                        UCS und viele andere Linux Distributionen beinhalten <ulink
                        url="http://www.rdesktop.org/">rdesktop</ulink> und <ulink
                        url="http://www.freerdp.com/">FreeRDP</ulink>.
                      </simpara>
                    </listitem>
                    <listitem>
                      <simpara>Für Apple iOS gibt es <ulink url="http://www.irdesktop.com/">iResktop</ulink>.</simpara>
                    </listitem>
                    <listitem>
                      <simpara>Für Android gibt es <ulink url="https://play.google.com/store/search?q=rdp+client%26c=apps">mehrere Apps</ulink>.</simpara>
                    </listitem>
                </itemizedlist>
            </section>

            <section id="computers:xrdp:know_issues">
                <title>Bekannte Probleme: Falsches Keyboard Layout</title>

                <para>
                    Bei der Anmeldung an KDE mit XRDP, wird die Tastatur standardmäßig mit dem US
                    Layout konfiguriert. Um das zu ändern, muss das Startmenü geöffnet und zum
                    <guimenu>Computer Reiter</guimenu> gewechselt werden, weiter über die
                    <guimenu>Systemeinstellungen</guimenu> zu <guimenu>Region &amp;
                    Sprachen</guimenu>. Dort muss das <guimenu>Tastatur Layout</guimenu> geöffnet
                    und <guimenu>Aktiviere Tastaturlayouts</guimenu> aktiviert werden. Das
                    gewünschte Layout kann anschließend von der Liste der verfügbaren Layouts links
                    ausgewählt werden. Ein Klick auf den rechten Pfeil fügt das Layout hinzu. Die
                    Hoch/Runter Pfeiltasten verändern die Reihenfolge in der rechten Liste der
                    <guimenu>Aktiven Layouts</guimenu>. Änderungen anwenden und Applikation
                    schließen. Hintergrundinformationen zu dem Problem finden sich in der <ulink
                    url="https://github.com/FreeRDP/FreeRDP/wiki/Keyboard">Projekt
                    Dokumentation</ulink>.
                </para>
            </section>

            <section id="computers:xrdp:alternatives">
                <title>Alternativen</title>

                <variablelist>
                  <varlistentry>
                    <term>VNC</term>
                    <listitem>
                      <simpara><wordasword>Virtual Network Connect</wordasword> bietet ein einfacheres Protokoll, das zum Beispiel für KVM verwendet wird.</simpara>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>SSH</term>
                    <listitem>
                      <simpara>Bietet standardmäßig nur eine Textkonsole, aber kann für das native Tunneln von X Sitzungen verwendet werden.</simpara>
                    </listitem>
                  </varlistentry>
                </variablelist>
            </section>
        </section>

        <section id="computers:SSH-Zugriff_auf_Systeme"><title>SSH-Zugriff auf Systeme</title>
            <para>
                Bei der Installation eines UCS-Systems wird in der Vorauswahl ein SSH-Server
                mitinstalliert. Über SSH können verschlüsselte Verbindungen zu Rechnern
                durchgeführt werden, wobei auch die Identität eines Rechners über eine
                Prüfsumme sichergestellt werden kann. Wesentliche Aspekte der Konfiguration
                des SSH-Servers lassen sich über &ucsUCR; anpassen:
            </para>
            <para>
                Standardmäßig ist der Login des privilegierten <systemitem class="username">root</systemitem>-Benutzers per SSH
                erlaubt (etwa um ein neu installiertes System an einem entfernten Standort zu
                konfigurieren, auf dem noch keine weiteren Benutzer angelegt wurden).
            </para>
            <itemizedlist>
				<listitem>
					<simpara>
					Wird die &ucsUCRV; <envar>sshd/permitroot</envar> auf <literal>without-password</literal>
                    gesetzt, so wird für den <systemitem class="username">root</systemitem>-Benutzer keine interaktive
                    Passwort-Abfrage mehr durchgeführt, sondern beispielsweise nur eine
                    Public-Key-basierte Anmeldung, was Brute-Force-Attacken auf
					Passwörter vermeidet.
					</simpara>
				</listitem>
				<listitem>
					<simpara>
					Soll für den <systemitem class="username">root</systemitem>-Benutzer überhaupt keine SSH-Anmeldung mehr möglich sein, kann dies
                    durch Setzen der &ucsUCRV; <envar>auth/sshd/user/root</envar> auf <literal>no</literal>
					deaktiviert werden.
					</simpara>
				</listitem>
            </itemizedlist>
            <para>
                Mit der &ucsUCRV; <envar>sshd/xforwarding</envar> kann
                konfiguriert werden, ob eine X11-Ausgabe über SSH weitergeleitet werden
                soll. Dies ist u.a. nötig, um einem Benutzer die Möglichkeit zu geben durch
                einen Login mit <command>ssh -X ZIELRECHNER</command> ein Programm mit grafischer
                Ausgabe auf einem entfernten Rechner zu starten. Die möglichen Einstellungen
                sind <literal>yes</literal> und <literal>no</literal>.
            </para>
            <para>
                Der Standard-Port für SSH-Verbindungen ist Port 22 über TCP. Wenn ein
                abweichender Port verwendet werden soll, kann dies über die
                &ucsUCR;-Variable <command>sshd/port</command> konfiguriert werden.
            </para>
        </section><!-- SSH-Zugriff auf Systeme -->

        <section id="basicservices::ntp"><title>Konfiguration der Zeitzone / Zeitsynchronisation</title>
            <para>
                Die Zeitzone, in der ein System angesiedelt ist, kann in &ucsUMC;
				unter <guimenu>Sprach-Einstellungen &ar; Zeitzone</guimenu>
                geändert werden.
            </para>
            <para>
                Asynchrone Systemzeiten zwischen den einzelnen Rechnern einer Domäne
                können die Quelle vielfältiger Fehler bedeuten: Sie verringern beispielsweise die
                Verlässlichkeit von Log-Dateien, stören den Kerberos-Betrieb und können die
                korrekte Auswertung von Passwortablaufintervallen stören.
            </para>
            <para>
                In einer Domäne dient standardmäßig der Domänencontroller Master als
                Zeitserver. Über die &ucsUCR;-Variablen <envar>timeserver</envar>,
                <envar>timeserver2</envar> und <envar>timeserver3</envar> können externe NTP-Server
                als Zeitquelle eingebunden werden.
            </para>
            <para>
                Eine manuelle Zeitsynchronisation kann durch den Befehl <command>ntpdate</command>
                gestartet werden.
            </para>
            <para>
                Windows-Clients, die in eine Samba 4-Domäne gejoint wurden,
                akzeptieren nur signierte NTP-Zeitanfragen. Wird die
                &ucsUCRV; <envar>ntp/signed</envar> auf <literal>yes</literal> gesetzt, werden die NTP-Pakete
                durch Samba 4 signiert.
            </para>
        </section>
    </section>
</chapter>
